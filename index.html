<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×›×•×ª×‘ +AI - ×¢×•×–×¨ ×›×ª×™×‘×ª ×”×—×™×‘×•×¨×™× ×©×œ×š</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        function startWriting(type) {
            const typeNames = {
                'argumentative': '×”×—×™×‘×•×¨ ×”×˜×™×¢×•× ×™',
                'descriptive': '×”×›×ª×™×‘×” ×”×™×¦×™×¨×ª×™×ª',
                'formal_letter': '×”××›×ª×‘ ×”×¨×©××™'
            };
            
            alert('ğŸ‰ ××¢×•×œ×”! ×¢×›×©×™×• ××ª×” ××•×›×Ÿ ×œ×”×ª×—×™×œ ×œ×›×ª×•×‘ ××ª ' + typeNames[type] + ' ×©×œ×š!\n\nğŸ’¡ ×˜×™×¤: ×©××•×¨ ××ª ×”××ª×•×•×” ×‘×¦×“ ×•×›×ª×•×‘ ×œ×¤×™×• ××ª ×”×—×™×‘×•×¨ ×‘××—×‘×¨×ª ××• ×‘××—×©×‘.\n\n×‘×”×¦×œ×—×”! ğŸš€');
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
            color: white;
            padding: 40px 0;
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        /* ×“×£ ×”×©×¢×¨ - ×¨×§ 3 ×§×•×‘×™×•×ª */
        .homepage {
            text-align: center;
        }

        .homepage h2 {
            color: #2c3e50;
            font-size: 2.2em;
            margin-bottom: 20px;
        }

        .homepage .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 50px;
            line-height: 1.6;
        }

        .essay-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 40px;
            margin-top: 40px;
        }

        .essay-type-box {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border: 3px solid #e9ecef;
            border-radius: 25px;
            padding: 50px 30px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .essay-type-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .essay-type-box > * {
            position: relative;
            z-index: 2;
        }

        .essay-type-box:hover {
            transform: translateY(-15px) scale(1.05);
            box-shadow: 0 25px 50px rgba(102, 126, 234, 0.4);
            border-color: #667eea;
        }

        .essay-type-box:hover::before {
            opacity: 1;
        }

        .essay-type-box:hover h3,
        .essay-type-box:hover p {
            color: white;
        }

        .essay-type-box .emoji {
            font-size: 4em;
            margin-bottom: 20px;
            display: block;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
        }

        .essay-type-box h3 {
            font-size: 1.8em;
            margin-bottom: 20px;
            transition: color 0.3s ease;
            color: #2c3e50;
            font-weight: bold;
        }

        .essay-type-box p {
            color: #6c757d;
            font-size: 1.1em;
            line-height: 1.6;
            transition: color 0.3s ease;
        }

        /* ×“×¤×™ ×”×›×ª×™×‘×” */
        .step-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .step-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-indicator {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.3em;
            color: #667eea;
            font-weight: bold;
        }

        .back-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .back-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-right: 5px solid #667eea;
        }

        .card h3 {
            color: #333;
            margin-bottom: 25px;
            font-size: 1.6em;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #555;
            font-size: 1.1em;
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e1e1;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            font-family: inherit;
            resize: vertical;
        }

        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .textarea-large {
            min-height: 120px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .tips-box {
            background: linear-gradient(45deg, #e3f2fd, #bbdefb);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            border: 2px solid #2196f3;
        }

        .tips-box h4 {
            color: #1565c0;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5em;
        }

        .tip-section {
            background: rgba(255, 255, 255, 0.8);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tip-section h5 {
            color: #0d47a1;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .tip-section ul {
            padding-right: 25px;
            margin-bottom: 15px;
        }

        .tip-section li {
            margin-bottom: 10px;
            line-height: 1.6;
            font-size: 1.05em;
        }

        .example-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
            font-style: italic;
            color: #495057;
        }

        .success-message {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
            text-align: center;
        }

        .error-message {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
            text-align: center;
        }

        .btn-auto-fix {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255,107,53,0.3);
            transition: all 0.3s ease;
        }

        .btn-auto-fix:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255,107,53,0.4);
        }

        .help-button {
            background: #007bff;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            text-decoration: none;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .help-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            text-decoration: none;
            color: white;
        }

        .help-button.dict { background: #007bff; }
        .help-button.google { background: #28a745; }
        .help-button.academy { background: #6f42c1; }
        .help-button.fix { background: #ff6b35; border: none; cursor: pointer; }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.5em;
            }
            
            .main-content {
                padding: 30px 20px;
            }
            
            .essay-type-grid {
                grid-template-columns: 1fr;
                gap: 25px;
            }

            .essay-type-box .emoji {
                font-size: 3em;
            }

            .essay-type-box h3 {
                font-size: 1.5em;
            }

            .essay-type-box {
                min-height: 250px;
                padding: 40px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>×›×•×ª×‘ +AI âœï¸</h1>
            <p>×”×¢×•×–×¨ ×”×—×›× ×©×œ×š ×œ×›×ª×™×‘×ª ×—×™×‘×•×¨×™× ××¢×•×œ×™×!</p>
        </div>

        <div class="main-content">
            <!-- ×“×£ ×”×©×¢×¨ - ×¨×§ 3 ×§×•×‘×™×•×ª ×‘×—×™×¨×” -->
            <div class="step-content active" id="homepage">
                <div class="homepage">
                    <h2>×‘×—×¨ ××ª ×¡×•×’ ×”×—×™×‘×•×¨ ×©×‘×¨×¦×•× ×š ×œ×›×ª×•×‘</h2>
                    <p class="subtitle">×œ×—×¥ ×¢×œ ××—×ª ××”××¤×©×¨×•×™×•×ª ×›×“×™ ×œ×”×ª×—×™×œ ×‘×ª×›× ×•×Ÿ ×”×—×™×‘×•×¨ ×©×œ×š</p>
                    
                    <div class="essay-type-grid">
                        <div class="essay-type-box" onclick="selectEssayType('argumentative')">
                            <div class="emoji">âš–ï¸</div>
                            <h3>×—×™×‘×•×¨ ×˜×™×¢×•× ×™</h3>
                            <p>×”×¦×’×ª ×¢××“×” ×¢× ×˜×™×¢×•× ×™× ×—×–×§×™×, ×”×ª×™×™×—×¡×•×ª ×œ×˜×¢× ×ª × ×’×“ ×•×”×¤×¨×›×ª×”. ××ª××™× ×œ× ×•×©××™× ×©× ×•×™×™× ×‘××—×œ×•×§×ª.</p>
                        </div>
                        
                        <div class="essay-type-box" onclick="selectEssayType('descriptive')">
                            <div class="emoji">ğŸ¨</div>
                            <h3>×›×ª×™×‘×” ×™×¦×™×¨×ª×™×ª</h3>
                            <p>×™×¦×™×¨×ª ×¡×™×¤×•×¨, ×ª×™××•×¨ ×—×•×•×™×” ××• ×–×™×›×¨×•×Ÿ ×‘××•×¤×Ÿ ×™×¦×™×¨×ª×™ ×•××¢× ×™×™×Ÿ. ×›×•×œ×œ ×‘× ×™×™×ª ×“××•×™×•×ª ×•×¢×œ×™×œ×”.</p>
                        </div>
                        
                        <div class="essay-type-box" onclick="selectEssayType('formal_letter')">
                            <div class="emoji">ğŸ“‹</div>
                            <h3>××›×ª×‘ ×¨×©××™</h3>
                            <p>×›×ª×™×‘×ª ××›×ª×‘ ×œ××•×¡×“, ×‘×™×ª ×¡×¤×¨ ××• ×’×•×¨× ×¨×©××™. ×›×•×œ×œ ××‘× ×” × ×›×•×Ÿ ×•×©×¤×” ××ª××™××”.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ×—×™×‘×•×¨ ×˜×™×¢×•× ×™ -->
            <div class="step-content" id="argumentative">
                <div class="progress-indicator">×ª×›× ×•×Ÿ ×—×™×‘×•×¨ ×˜×™×¢×•× ×™ âš–ï¸</div>
                
                <button class="back-btn" onclick="goBack()">â† ×—×–×¨×” ×œ×‘×—×™×¨×ª ×¡×•×’ ×—×™×‘×•×¨</button>
                
                <div class="card">
                    <h3>×ª×›× ×•×Ÿ ×”×—×™×‘×•×¨ ×”×˜×™×¢×•× ×™ ×©×œ×š ğŸ¯</h3>
                    
                    <div class="input-group">
                        <label for="argTopic">××” ×”× ×•×©× ×©×œ ×”×—×™×‘×•×¨?</label>
                        <input type="text" id="argTopic" placeholder="×œ××©×œ: ×”×©×¤×¢×ª ×”×˜×›× ×•×œ×•×’×™×” ×¢×œ ×”×—×‘×¨×” ×”××•×“×¨× ×™×ª">
                    </div>

                    <div class="input-group">
                        <label for="argPosition">××” ×”×˜×¢× ×” ×©×œ×š?</label>
                        <textarea id="argPosition" class="textarea-large" placeholder="×”×¦×’ ×‘×‘×™×¨×•×¨ ××” ×”×˜×¢× ×” ×©×œ×š ×‘× ×•×©×..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="argArguments">3 ×˜×™×¢×•× ×™× ×¢×™×§×¨×™×™× ×”×ª×•××›×™× ×‘×˜×¢× ×” ×©×œ×š:</label>
                        <textarea id="argArguments" class="textarea-large" placeholder="×˜×™×¢×•×Ÿ 1: ...&#10;×˜×™×¢×•×Ÿ 2: ...&#10;×˜×™×¢×•×Ÿ 3: ..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="argCounterArgument">×˜×¢× ×ª ×”× ×’×“:</label>
                        <textarea id="argCounterArgument" class="textarea-large" placeholder="×™×© ×”×˜×•×¢× ×™× ×›×™..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="argRefutation">×”×”×¤×¨×›×” ×©×œ×š ×œ×˜×¢× ×ª ×”× ×’×“:</label>
                        <textarea id="argRefutation" class="textarea-large" placeholder="××•×œ× ×˜×¢× ×” ×–×• ×©×’×•×™×” ××›×™×•×•×Ÿ ×©..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="argSummary">×¡×™×›×•× ×•×”××œ×¦×”:</label>
                        <textarea id="argSummary" class="textarea-large" placeholder="×¡×›× ××ª ×˜×¢× ×ª×š ×•×›×ª×•×‘ ×”××œ×¦×”..."></textarea>
                    </div>

                    <div style="text-align: center; margin: 30px 0;">
                        <button class="btn-primary" onclick="checkSpellingBeforeOutline('argumentative')" style="background: #17a2b8; margin-left: 10px;">ğŸ” ×‘×“×•×§ ×©×’×™××•×ª ×›×ª×™×‘</button>
                        <button class="btn-primary" onclick="generateOutline('argumentative')">×¦×•×¨ ××ª×•×•×” ×œ×—×™×‘×•×¨ ğŸš€</button>
                    </div>
                    <div id="argOutline"></div>
                </div>

                <div class="tips-box">
                    <h4>ğŸ¯ ×˜×™×¤×™× ×œ×—×™×‘×•×¨ ×˜×™×¢×•× ×™ ××•×¦×œ×—</h4>
                    
                    <div class="tip-section">
                        <h5>ğŸ—ï¸ ××‘× ×” ×—×–×§</h5>
                        <ul>
                            <li>×¤×ª×™×—×”: ×”×¦×’ ××ª ×”× ×•×©× ×•××ª ×”×¢××“×” ×©×œ×š ×‘×‘×™×¨×•×¨</li>
                            <li>×’×•×£ ×”×—×™×‘×•×¨ ×™×›×œ×•×œ: 4 ×¢×“ 6 ×¤×¡×§××•×ª, ×›×œ ×¤×¡×§×” ×ª×›×œ×•×œ ×“×•×’××”/×”×•×›×—×”</li>
                            <li>×”×ª×™×™×—×¡×•×ª ×œ×¢××“×” × ×’×“×™×ª ×•×”×¤×¨×›×” ×©×œ×”</li>
                            <li>××¡×§× ×”: ×¡×™×›×•× ×”×˜×¢× ×” ×©×œ×š ×•××¡×§× ×”</li>
                        </ul>
                        <div class="example-box">
                            <strong>×“×•×’××” ×œ×¤×ª×™×—×”:</strong> "×‘×©× ×™× ×”××—×¨×•× ×•×ª ×—×œ×” ×¢×œ×™×™×” ×‘×©×™××•×© ×‘×›×œ×™ ×”×‘×™× ×” ×”××œ××›×•×ª×™×ª ×œ×™×¦×™×¨×ª ×—×™×‘×•×¨×™×."
                        </div>
                    </div>

                    <div class="tip-section">
                        <h5>ğŸ’ª ×˜×™×¤×™× ××¢×©×™×™×</h5>
                        <ul>
                            <li>×”×©×ª××© ×‘×“×•×’×××•×ª ×§×•× ×§×¨×˜×™×•×ª ×•××§×•×¨×•×ª ×××™× ×™×</li>
                            <li>×›×œ ×¤×¡×§×” ×ª×ª×™×—×¡ ×œ×”×™×‘×˜ ×©×•× ×”</li>
                            <li>××™×œ×•×ª ×§×™×©×•×¨: "×¨××©×™×ª", "×©× ×™×ª", "×™×ª×¨×” ××›×š", "×œ×›×Ÿ"</li>
                            <li>×–×›×•×¨ ×©××ª×” ×¦×¨×™×š ×œ×”×ª×™×—×¡ ×œ×˜×¢× ×ª ×”× ×’×“ ×•×œ×”×¤×¨×™×š ××•×ª×”</li>
                        </ul>
                        <div class="example-box">
                            <strong>×“×•×’××” ×œ××¢×‘×¨ ××¤×¡×§×” ×œ×¤×¡×§×”:</strong> "×‘× ×•×¡×£ ×œ×›×š, ×—×©×•×‘ ×œ×¦×™×™×Ÿ ×›×™..." ××• "××¦×“ ×©× ×™, ×™×© ×œ×–×›×•×¨ ×©..."
                        </div>
                    </div>
                </div>
            </div>

            <!-- ×›×ª×™×‘×” ×™×¦×™×¨×ª×™×ª -->
            <div class="step-content" id="descriptive">
                <div class="progress-indicator">×ª×›× ×•×Ÿ ×›×ª×™×‘×” ×™×¦×™×¨×ª×™×ª ğŸ¨</div>
                
                <button class="back-btn" onclick="goBack()">â† ×—×–×¨×” ×œ×‘×—×™×¨×ª ×¡×•×’ ×—×™×‘×•×¨</button>
                
                <div class="card">
                    <h3>×ª×›× ×•×Ÿ ×”×›×ª×™×‘×” ×”×™×¦×™×¨×ª×™×ª ×©×œ×š ğŸ¨</h3>
                    
                    <div class="input-group">
                        <label for="descTopic">×¨×¢×™×•×Ÿ ×¨××©×•× ×™ - ×¢×œ ××” ×ª×¨×¦×” ×œ×›×ª×•×‘?</label>
                        <input type="text" id="descTopic" placeholder="×œ××©×œ: ×¡×™×¤×•×¨, ×–×›×¨×•×Ÿ ×™×œ×“×•×ª, ×“××™×•×Ÿ, ×¡×™×˜×•××¦×™×”">
                    </div>

                    <div class="input-group">
                        <label for="descMainImpression">××¤×™×•×Ÿ ×“××•×™×•×ª ×•××§×•×</label>
                        <textarea id="descMainImpression" class="textarea-large" placeholder="××™×”×Ÿ ×”×“××•×™×•×ª ×”×¨××©×™×•×ª? ×”×™×›×Ÿ ××ª×¨×—×© ×”×¡×™×¤×•×¨? ×‘××™×–×” ×ª×§×•×¤×”? ××™×š ×”×“××•×™×•×ª ××¨×’×™×©×•×ª?"></textarea>
                    </div>

                    <div class="input-group">
                        <label for="descAspects">×‘× ×™×™×ª ×¢×œ×™×œ×”:</label>
                        <textarea id="descAspects" class="textarea-large" placeholder="×¤×ª×™×—×”, ×‘×¢×™×”/×§×•× ×¤×œ×™×§×˜, ×©×™×, ×¤×ª×¨×•×Ÿ, ×¡×™×•×..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="descSenses">×›×ª×™×‘×” ×¡×’× ×•× ×™×ª:</label>
                        <textarea id="descSenses" class="textarea-large" placeholder="×©×™××•×© ×‘××˜××¤×•×¨×•×ª, ×“×™××•×™×™×, ×©××œ×•×ª ×¨×™×˜×•×¨×™×•×ª, ×›×ª×™×‘ ×‘×’×•×£ ×¨××©×•×Ÿ/×©×œ×™×©×™, ×›×ª×™×‘×” ×—×•×©×™×ª: ××” ×©×•××¢×™×? ×¨×•××™×? ××¨×™×—×™×? ××¨×’×™×©×™×? ×©×™×œ×•×‘ ××•× ×•×œ×•×’ ×¤× ×™××™ ××• ×“×™××œ×•×’×™×..."></textarea>
                    </div>

                    <div style="text-align: center; margin: 30px 0;">
                        <button class="btn-primary" onclick="checkSpellingBeforeOutline('descriptive')" style="background: #17a2b8; margin-left: 10px;">ğŸ” ×‘×“×•×§ ×©×’×™××•×ª ×›×ª×™×‘</button>
                        <button class="btn-primary" onclick="generateOutline('descriptive')">×¦×•×¨ ××ª×•×•×” ×œ×—×™×‘×•×¨ ğŸš€</button>
                    </div>
                    <div id="descOutline"></div>
                </div>

                <div class="tips-box">
                    <h4>ğŸ¨ ×˜×™×¤×™× ×œ×›×ª×™×‘×” ×™×¦×™×¨×ª×™×ª ××•×¦×œ×—×ª</h4>
                    
                    <div class="tip-section">
                        <h5>ğŸŒŸ ×¢×§×¨×•× ×•×ª ×‘×¡×™×¡×™×™×</h5>
                        <ul>
                            <li>×œ×›×ª×•×‘ ×¤×ª×™×—×” ××¡×§×¨× ×ª</li>
                            <li>×œ×‘× ×•×ª ×¢×œ×™×œ×” ×‘×¨×•×¨×”</li>
                            <li>×œ×”×ª×—×™×œ ××¨×’×© ×—×–×§</li>
                            <li>×œ×”×¤×¢×™×œ ××ª ×”×—×•×©×™×</li>
                            <li>×œ×”×©×ª××© ×‘×©×¤×” ×¢×©×™×¨×” ×•××’×•×•× ×ª</li>
                            <li>×œ×©×œ×‘ ×“×™××œ×•×’×™× ×•××•× ×•×œ×•×’ ×¤× ×™××™</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- ××›×ª×‘ ×¨×©××™ -->
            <div class="step-content" id="formal_letter">
                <div class="progress-indicator">×ª×›× ×•×Ÿ ××›×ª×‘ ×¨×©××™ ğŸ“‹</div>
                
                <button class="back-btn" onclick="goBack()">â† ×—×–×¨×” ×œ×‘×—×™×¨×ª ×¡×•×’ ×—×™×‘×•×¨</button>
                
                <div class="card">
                    <h3>×ª×›× ×•×Ÿ ×”××›×ª×‘ ×”×¨×©××™ ×©×œ×š ğŸ“‹</h3>
                    
                    <div class="input-group">
                        <label for="formalPurpose">××” ×”××˜×¨×” ×©×œ ×”××›×ª×‘?</label>
                        <input type="text" id="formalPurpose" placeholder="×œ××©×œ: ×‘×§×©×” ×œ×“×—×™×™×ª ×‘×—×™× ×”, ×ª×œ×•× ×” ×¢×œ ×©×™×¨×•×ª, ×‘×§×©×” ×œ××œ×’×”, ×›×ª×™×‘×ª ×”××œ×¦×”">
                    </div>

                    <div class="input-group">
                        <label for="formalRecipient">×œ××™ ××ª×” ×¤×•× ×”?</label>
                        <input type="text" id="formalRecipient" placeholder="×œ××©×œ: ×× ×”×œ ×‘×™×ª ×”×¡×¤×¨, ××—×œ×§×ª ×©×™×¨×•×ª ×œ×§×•×—×•×ª, ×•×¢×“×ª ××œ×’×•×ª">
                    </div>

                    <div class="input-group">
                        <label for="formalMainPoints">× ×§×•×“×•×ª ×¢×™×§×¨×™×•×ª ×©×‘×¨×¦×•× ×š ×œ×”×¢×‘×™×¨:</label>
                        <textarea id="formalMainPoints" class="textarea-large" placeholder="× ×§×•×“×” 1: ×”×‘×¢×™×” ××• ×”×‘×§×©×”...&#10;× ×§×•×“×” 2: ×”×¡×™×‘×•×ª ×•×”× ×¡×™×‘×•×ª...&#10;× ×§×•×“×” 3: ××” ××ª×” ××‘×§×© ×œ×§×‘×œ..."></textarea>
                    </div>

                    <div class="input-group">
                        <label for="formalDetails">×¤×¨×˜×™× ×¨×œ×•×•× ×˜×™×™× (×ª××¨×™×›×™×, ××¡×¤×¨×™ ××¡××›×ª× ×•×›×•'):</label>
                        <textarea id="formalDetails" class="textarea-large" placeholder="×¨×©×•× ×¤×¨×˜×™× ×—×©×•×‘×™× ×©×¦×¨×™×š ×œ×›×œ×•×œ ×‘××›×ª×‘..."></textarea>
                    </div>

                    <div style="text-align: center; margin: 30px 0;">
                        <button class="btn-primary" onclick="checkSpellingBeforeOutline('formal_letter')" style="background: #17a2b8; margin-left: 10px;">ğŸ” ×‘×“×•×§ ×©×’×™××•×ª ×›×ª×™×‘</button>
                        <button class="btn-primary" onclick="generateOutline('formal_letter')">×¦×•×¨ ××ª×•×•×” ×œ××›×ª×‘ ğŸš€</button>
                    </div>
                    <div id="formalOutline"></div>
                </div>

                <div class="tips-box">
                    <h4>ğŸ“‹ ×˜×™×¤×™× ×œ××›×ª×‘ ×¨×©××™ ××•×¦×œ×—</h4>
                    
                    <div class="tip-section">
                        <h5>ğŸ—ï¸ ××‘× ×” × ×“×¨×©</h5>
                        <ul>
                            <li>×›×ª×•×‘×ª ×”×©×•×œ×— ×•×ª××¨×™×š (×‘×¨××© ×”××›×ª×‘)</li>
                            <li>×›×ª×•×‘×ª ×”× ××¢×Ÿ ×•× ×•×©× ×”××›×ª×‘</li>
                            <li>×¤× ×™×™×” ×× ×•××¡×ª ("××“×•×Ÿ/×’×‘×¨×ª × ×›×‘×“/×”")</li>
                            <li>×’×•×£ ×”××›×ª×‘ - ×”×‘×”×¨×ª ×”××˜×¨×” ×•×¤×™×¨×•×˜ ×”×‘×§×©×”</li>
                            <li>×¡×™×•× ×× ×•××¡ ×•×—×ª×™××”</li>
                        </ul>
                        <div class="example-box">
                            <strong>×“×•×’××” ×œ×¤×ª×™×—×”:</strong> "×”× ×“×•×Ÿ: ×‘×§×©×” ×œ×“×—×™×™×ª ××•×¢×“ ×‘×—×™× ×”<br>××“×•×Ÿ/×’×‘×¨×ª × ×›×‘×“/×”,<br>×× ×™ ×¤×•× ×” ××œ×™×›× ×‘×¢× ×™×™×Ÿ ×‘×§×©×” ×œ×“×—×™×™×ª ××•×¢×“ ×‘×—×™× ×”..."
                        </div>
                    </div>

                    <div class="tip-section">
                        <h5>ğŸ’¼ ×©×¤×” ×•×¡×’× ×•×Ÿ</h5>
                        <ul>
                            <li>×”×©×ª××© ×‘×©×¤×” ×¨×©××™×ª</li>
                            <li>×”×‘×”×¨ ××ª ×”××˜×¨×” ×›×‘×¨ ×‘×¤×¡×§×” ×”×¨××©×•× ×”</li>
                            <li>×”×™×” ×‘×¨×•×¨ ×•××“×•×™×§ ×‘×‘×§×©×ª×š</li>
                        </ul>
                        <div class="example-box">
                            <strong>×‘×™×˜×•×™×™× ××•×¢×™×œ×™×:</strong> "×× ×™ ×¤×•× ×” ××œ×™×›× ×‘×¢× ×™×™×Ÿ...", "××•×“×” ×œ×§×‘×œ ××¢× ×” ×‘×”×§×“×", "×‘×›×‘×•×“ ×¨×‘", "×‘×ª×•×“×” ××¨××©"
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function selectEssayType(type) {
            document.getElementById('homepage').classList.remove('active');
            document.getElementById(type).classList.add('active');
            window.scrollTo(0, 0);
        }

        function goBack() {
            document.querySelectorAll('.step-content').forEach(step => {
                step.classList.remove('active');
            });
            
            document.querySelectorAll('input, textarea').forEach(input => {
                input.value = '';
                input.style.borderColor = '';
                input.style.backgroundColor = '';
            });
            
            document.querySelectorAll('#argOutline, #descOutline, #formalOutline').forEach(outline => {
                outline.innerHTML = '';
            });
            
            const existingErrorDetails = document.getElementById('errorDetails');
            if (existingErrorDetails) {
                existingErrorDetails.remove();
            }
            
            document.getElementById('homepage').classList.add('active');
            window.scrollTo(0, 0);
        }

        async function generateOutline(type) {
            const hasNoErrors = await checkAllInputsForSpelling(type);
            if (!hasNoErrors) {
                showMessage('× ××¦××• ×©×’×™××•×ª ×›×ª×™×‘ ×‘×˜×§×¡×˜! ×× × ×ª×§×Ÿ ××ª ×”×©×’×™××•×ª ×œ×¤× ×™ ×™×¦×™×¨×ª ×”××ª×•×•×”.', 'error');
                return;
            }

            let outlineHtml = '';

            switch(type) {
                case 'argumentative':
                    const argTopic = document.getElementById('argTopic').value;
                    const argPosition = document.getElementById('argPosition').value;
                    const argArguments = document.getElementById('argArguments').value;
                    const argCounterArgument = document.getElementById('argCounterArgument').value;
                    const argRefutation = document.getElementById('argRefutation').value;
                    const argSummary = document.getElementById('argSummary').value;

                    if (!argTopic || !argPosition || !argArguments || !argCounterArgument || !argRefutation || !argSummary) {
                        showMessage('×× × ××œ× ××ª ×›×œ ×”×©×“×•×ª ×›×“×™ ×œ×§×‘×œ ××ª×•×•×” ××•×ª××!', 'error');
                        return;
                    }

                    const argsList = argArguments.split('\n').filter(arg => arg.trim());
                    
                    outlineHtml = '<div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 15px; padding: 25px; margin-top: 20px;">' +
                        '<h4 style="color: #2e7d32; margin-bottom: 20px; text-align: center;">ğŸ¯ ×”××ª×•×•×” ×©×œ×š ××•×›×Ÿ!</h4>' +
                        '<div style="background: white; padding: 25px; border-radius: 10px;">' +
                        '<h5 style="color: #1565c0; margin-bottom: 20px;">ğŸ“ ××‘× ×” ×”×—×™×‘×•×¨ ×”×˜×™×¢×•× ×™:</h5>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸŒŸ ×¤×ª×™×—×”:</strong> ×”×¦×’×ª ×”× ×•×©× "' + argTopic + '"</p>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸ¯ ×”×˜×¢× ×” ×©×œ×š:</strong> ' + argPosition + '</p>';
                    
                    argsList.forEach((arg, index) => {
                        outlineHtml += '<p style="margin-bottom: 10px;"><strong>ğŸ“ ×˜×™×¢×•×Ÿ ' + (index + 1) + ':</strong> ' + arg.trim() + '</p>';
                    });
                    
                    outlineHtml += '<p style="margin-bottom: 10px;"><strong>âš–ï¸ ×˜×¢× ×ª ×”× ×’×“:</strong> ' + argCounterArgument + '</p>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸ’ª ×”×¤×¨×›×”:</strong> ' + argRefutation + '</p>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸ¯ ×¡×™×›×•× ×•×”××œ×¦×”:</strong> ' + argSummary + '</p>' +
                        '</div>' +
                        '<div style="margin-top: 20px; text-align: center;">' +
                        '<button class="btn-primary" onclick="startWriting(\'argumentative\')">×”×ª×—×œ ×œ×›×ª×•×‘ ××ª ×”×—×™×‘×•×¨! âœï¸</button>' +
                        '</div>' +
                        '</div>';
                    document.getElementById('argOutline').innerHTML = outlineHtml;
                    break;

                case 'descriptive':
                    const descTopic = document.getElementById('descTopic').value;
                    const descMainImpression = document.getElementById('descMainImpression').value;
                    const descAspects = document.getElementById('descAspects').value;
                    const descSenses = document.getElementById('descSenses').value;

                    if (!descTopic || !descMainImpression || !descAspects || !descSenses) {
                        showMessage('×× × ××œ× ××ª ×›×œ ×”×©×“×•×ª ×›×“×™ ×œ×§×‘×œ ××ª×•×•×” ××•×ª××!', 'error');
                        return;
                    }

                    const aspectsList = descAspects.split('\n').filter(aspect => aspect.trim());
                    
                    outlineHtml = '<div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 15px; padding: 25px; margin-top: 20px;">' +
                        '<h4 style="color: #2e7d32; margin-bottom: 20px; text-align: center;">ğŸ¨ ×”××ª×•×•×” ×©×œ×š ××•×›×Ÿ!</h4>' +
                        '<div style="background: white; padding: 25px; border-radius: 10px;">' +
                        '<h5 style="color: #1565c0; margin-bottom: 20px;">ğŸ“ ××‘× ×” ×”×›×ª×™×‘×” ×”×™×¦×™×¨×ª×™×ª:</h5>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸŒŸ ×”×¨×¢×™×•×Ÿ:</strong> ' + descTopic + '</p>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸ‘¥ ×“××•×™×•×ª ×•××§×•×:</strong> ' + descMainImpression + '</p>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸ“– ×¢×œ×™×œ×”:</strong></p>';
                    
                    aspectsList.forEach((aspect, index) => {
                        outlineHtml += '<p style="margin-bottom: 10px;"><strong>ğŸ­ ×©×œ×‘ ' + (index + 1) + ':</strong> ' + aspect.trim() + '</p>';
                    });
                    
                    outlineHtml += '<p style="margin-bottom: 10px;"><strong>âœ¨ ×¡×’× ×•×Ÿ ×›×ª×™×‘×”:</strong> ' + descSenses + '</p>' +
                        '</div>' +
                        '<div style="margin-top: 20px; text-align: center;">' +
                        '<button class="btn-primary" onclick="startWriting(\'descriptive\')">×”×ª×—×œ ×œ×›×ª×•×‘! âœï¸</button>' +
                        '</div>' +
                        '</div>';
                    document.getElementById('descOutline').innerHTML = outlineHtml;
                    break;

                case 'formal_letter':
                    const formalPurpose = document.getElementById('formalPurpose').value;
                    const formalRecipient = document.getElementById('formalRecipient').value;
                    const formalMainPoints = document.getElementById('formalMainPoints').value;
                    const formalDetails = document.getElementById('formalDetails').value;

                    if (!formalPurpose || !formalRecipient || !formalMainPoints) {
                        showMessage('×× × ××œ× ××ª ×”×©×“×•×ª ×”×—×•×‘×” ×›×“×™ ×œ×§×‘×œ ××ª×•×•×” ××•×ª××!', 'error');
                        return;
                    }

                    const pointsList = formalMainPoints.split('\n').filter(point => point.trim());
                    
                    outlineHtml = '<div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 15px; padding: 25px; margin-top: 20px;">' +
                        '<h4 style="color: #2e7d32; margin-bottom: 20px; text-align: center;">ğŸ“‹ ×”××ª×•×•×” ×©×œ×š ××•×›×Ÿ!</h4>' +
                        '<div style="background: white; padding: 25px; border-radius: 10px;">' +
                        '<h5 style="color: #1565c0; margin-bottom: 20px;">ğŸ“ ××‘× ×” ×”××›×ª×‘ ×”×¨×©××™:</h5>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸ“ ×›×ª×•×‘×ª ×•×ª××¨×™×š</strong></p>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸ“® × ××¢×Ÿ:</strong> ' + formalRecipient + '</p>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸ“‹ ××˜×¨×”:</strong> ' + formalPurpose + '</p>' +
                        '<p style="margin-bottom: 10px;"><strong>ğŸŒŸ ×¤×ª×™×—×” ×× ×•××¡×ª</strong></p>';
                    
                    pointsList.forEach((point, index) => {
                        outlineHtml += '<p style="margin-bottom: 10px;"><strong>ğŸ“ × ×§×•×“×” ' + (index + 1) + ':</strong> ' + point.trim() + '</p>';
                    });
                    
                    if (formalDetails) {
                        outlineHtml += '<p style="margin-bottom: 10px;"><strong>ğŸ“„ ×¤×¨×˜×™× × ×•×¡×¤×™×:</strong> ' + formalDetails + '</p>';
                    }
                    
                    outlineHtml += '<p style="margin-bottom: 10px;"><strong>ğŸ¯ ×¡×™×•× ×•×—×ª×™××” ×× ×•××¡×ª</strong></p>' +
                        '</div>' +
                        '<div style="margin-top: 20px; text-align: center;">' +
                        '<button class="btn-primary" onclick="startWriting(\'formal_letter\')">×”×ª×—×œ ×œ×›×ª×•×‘ ××ª ×”××›×ª×‘! âœï¸</button>' +
                        '</div>' +
                        '</div>';
                    document.getElementById('formalOutline').innerHTML = outlineHtml;
                    break;
            }

            showMessage('×”××ª×•×•×” × ×•×¦×¨ ×‘×”×¦×œ×—×”! ğŸ‰', 'success');
        }

        async function checkAllInputsForSpelling(sectionType) {
            const section = document.getElementById(sectionType);
            const inputs = section.querySelectorAll('input, textarea');
            let hasErrors = false;

            showMessage('ğŸ” ×‘×•×“×§ ×©×’×™××•×ª ×›×ª×™×‘ ×¢× ×‘×™× ×” ××œ××›×•×ª×™×ª...', 'info');

            for (const input of inputs) {
                if (input.value.trim()) {
                    try {
                        const errors = await checkSpellingInText(input.value);
                        if (errors.length > 0) {
                            hasErrors = true;
                            input.style.borderColor = '#dc3545';
                            input.style.backgroundColor = '#fff5f5';
                        } else {
                            input.style.borderColor = '#28a745';
                            input.style.backgroundColor = '#f0fff4';
                        }
                    } catch (error) {
                        console.log('×©×’×™××” ×‘×‘×“×™×§×ª ×›×ª×™×‘:', error);
                        const errors = checkSpellingLocal(input.value);
                        if (errors.length > 0) {
                            hasErrors = true;
                            input.style.borderColor = '#dc3545';
                            input.style.backgroundColor = '#fff5f5';
                        } else {
                            input.style.borderColor = '#28a745';
                            input.style.backgroundColor = '#f0fff4';
                        }
                    }
                }
            }

            return !hasErrors;
        }

        async function checkSpellingBeforeOutline(sectionType) {
            const section = document.getElementById(sectionType);
            const inputs = section.querySelectorAll('input, textarea');
            let totalErrors = 0;
            let errorDetails = [];
            let totalWords = 0;

            // ×”×¦×’ ×”×•×“×¢×ª ×˜×¢×™× ×” ××©×•×¤×¨×ª
            showMessage('ğŸ¯ ××ª×—×™×œ ×‘×“×™×§×” ×××•×§×“×ª ×©×œ ×©×’×™××•×ª ×›×ª×™×‘ ×‘×¢×‘×¨×™×ª...', 'info');

            for (const input of inputs) {
                if (input.value.trim()) {
                    const wordCount = input.value.split(/\s+/).length;
                    totalWords += wordCount;
                    
                    // ×”×¦×’ ×”×ª×§×“××•×ª
                    showMessage(`ğŸ” ×‘×•×“×§ ×©×’×™××•×ª ×›×ª×™×‘ ×‘×©×“×”: "${input.previousElementSibling.textContent}" (${wordCount} ××™×œ×™×)...`, 'info');
                    
                    try {
                        const errors = await checkSpellingInText(input.value);
                        if (errors.length > 0) {
                            totalErrors += errors.length;
                            input.style.borderColor = '#dc3545';
                            input.style.backgroundColor = '#fff5f5';
                            errorDetails.push({
                                field: input.previousElementSibling.textContent,
                                errors: errors
                            });
                        } else {
                            input.style.borderColor = '#28a745';
                            input.style.backgroundColor = '#f0fff4';
                        }
                    } catch (error) {
                        console.log('×©×’×™××” ×‘×‘×“×™×§×ª ×›×ª×™×‘:', error);
                        // ×× ×™×© ×©×’×™××”, ×”×©×ª××© ×‘×‘×“×™×§×” ××§×•××™×ª
                        const errors = checkSpellingLocal(input.value);
                        if (errors.length > 0) {
                            totalErrors += errors.length;
                            input.style.borderColor = '#dc3545';
                            input.style.backgroundColor = '#fff5f5';
                            errorDetails.push({
                                field: input.previousElementSibling.textContent,
                                errors: errors
                            });
                        } else {
                            input.style.borderColor = '#28a745';
                            input.style.backgroundColor = '#f0fff4';
                        }
                    }
                }
            }

            // ×”×¡×¨ ×”×•×“×¢×•×ª ×©×’×™××•×ª ×§×•×“××•×ª
            const existingErrorDetails = document.getElementById('errorDetails');
            if (existingErrorDetails) {
                existingErrorDetails.remove();
            }

            if (totalErrors > 0) {
                showMessage(`ğŸ” × ××¦××• ${totalErrors} ×©×’×™××•×ª ×›×ª×™×‘ ××ª×•×š ${totalWords} ××™×œ×™×. ×›×œ ×©×’×™××” ××¡×•×× ×ª ×¢× ×§×™×©×•×¨×™× ×œ×¢×–×¨×” ×‘×ª×™×§×•×Ÿ.`, 'error');
                
                // ×¦×•×¨ ×¨×©×™××” ××¤×•×¨×˜×ª ×©×œ ×©×’×™××•×ª
                const errorDetailsDiv = document.createElement('div');
                errorDetailsDiv.id = 'errorDetails';
                errorDetailsDiv.style.cssText = `
                    background: #fff3cd;
                    border: 2px solid #ffc107;
                    border-radius: 10px;
                    padding: 20px;
                    margin: 20px 0;
                    max-height: 400px;
                    overflow-y: auto;
                `;
                
                let errorHtml = '<h4 style="color: #856404; margin-bottom: 15px; text-align: center;">ğŸ¯ ×©×’×™××•×ª ×›×ª×™×‘ ×©× ××¦××•:</h4>';
                
                errorDetails.forEach(field => {
                    errorHtml += '<div style="margin-bottom: 15px; padding: 15px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">';
                    errorHtml += '<h5 style="color: #721c24; margin-bottom: 12px; font-size: 16px;">ğŸ“ ' + field.field + '</h5>';
                    
                    field.errors.forEach((error, index) => {
                        const isAIError = error.type.includes('AI');
                        const borderColor = isAIError ? '#17a2b8' : '#dc3545';
                        
                        errorHtml += '<div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; padding: 12px; background: #f8f9fa; border-radius: 8px; border-right: 4px solid ' + borderColor + ';">';
                        
                        // ×¦×“ ×©×××œ - ×”××™×œ×” ×”×©×’×•×™×” ×•×”×¡×•×’
                        errorHtml += '<div style="flex: 1;">';
                        errorHtml += '<div style="display: flex; align-items: center; margin-bottom: 5px;">';
                        errorHtml += '<span style="background: ' + borderColor + '; color: white; padding: 3px 8px; border-radius: 12px; font-size: 11px; margin-left: 8px;">' + error.type + '</span>';
                        errorHtml += '<span style="color: #dc3545; font-weight: bold; margin-left: 10px;">âŒ "' + error.word + '"</span>';
                        errorHtml += '</div>';
                        if (error.message) {
                            errorHtml += '<div style="font-size: 12px; color: #6c757d; font-style: italic; margin-bottom: 5px;">' + error.message + '</div>';
                        }
                        errorHtml += '</div>';
                        
                        // ×¦×“ ×™××™×Ÿ - ×”×”×¦×¢×” ×œ×ª×™×§×•×Ÿ
                        errorHtml += '<div style="text-align: left;">';
                        errorHtml += '<span style="color: #6c757d; margin: 0 10px; font-size: 16px;">â†’</span>';
                        errorHtml += '<span style="color: #28a745; font-weight: bold; background: #e8f5e8; padding: 4px 8px; border-radius: 4px;">âœ… ' + error.suggestion + '</span>';
                        errorHtml += '</div>';
                        
                        errorHtml += '</div>';
                        
                        // ×”×•×¡×£ ×›×¤×ª×•×¨×™ ×¢×–×¨×” ×œ×ª×™×§×•×Ÿ
                        errorHtml += '<div style="margin-top: 8px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">';
                        
                        // ×›×¤×ª×•×¨ ×—×™×¤×•×© ×‘××™×œ×•×Ÿ ××•×¨×¤×™×§×¡
                        const morfixUrl = 'https://www.morfix.co.il/' + encodeURIComponent(error.word);
                        errorHtml += '<a href="' + morfixUrl + '" target="_blank" class="help-button dict">';
                        errorHtml += 'ğŸ“– ×—×¤×© ×‘××™×œ×•×Ÿ';
                        errorHtml += '</a>';
                        
                        // ×›×¤×ª×•×¨ ×—×™×¤×•×© ×‘×’×•×’×œ ×œ×›×ª×™×‘ × ×›×•×Ÿ
                        const googleUrl = 'https://www.google.com/search?q=' + encodeURIComponent('"' + error.suggestion + '" ×›×ª×™×‘ × ×›×•×Ÿ ×¢×‘×¨×™×ª');
                        errorHtml += '<a href="' + googleUrl + '" target="_blank" class="help-button google">';
                        errorHtml += 'ğŸ” ×‘×“×•×§ ×‘×’×•×’×œ';
                        errorHtml += '</a>';
                        
                        // ×›×¤×ª×•×¨ ×œ××™×“×¢ × ×•×¡×£ ×‘××§×“××™×” ×œ×œ×©×•×Ÿ ×”×¢×‘×¨×™×ª
                        const academyUrl = 'https://hebrew-academy.org.il/keyword/' + encodeURIComponent(error.suggestion);
                        errorHtml += '<a href="' + academyUrl + '" target="_blank" class="help-button academy">';
                        errorHtml += 'ğŸ“ ××§×“××™×” ×œ×œ×©×•×Ÿ';
                        errorHtml += '</a>';
                        
                        // ×›×¤×ª×•×¨ ×”×¢×ª×§×” ×œ×©×“×” ×”×˜×§×¡×˜
                        errorHtml += '<button onclick="copyCorrection(\'' + field.field + '\', \'' + error.word + '\', \'' + error.suggestion + '\')" class="help-button fix">';
                        errorHtml += 'âœï¸ ×ª×§×Ÿ ××•×˜×•××˜×™×ª';
                        errorHtml += '</button>';
                        
                        errorHtml += '</div>';
                        errorHtml += '<hr style="margin: 15px 0; border: none; border-top: 1px solid #e9ecef;">';
                    });
                    
                    errorHtml += '</div>';
                });
                
                errorHtml += '<div style="text-align: center; margin-top: 20px; padding-top: 15px; border-top: 2px solid #ffc107;">';
                errorHtml += '<div style="margin-bottom: 15px;"><strong>ğŸ’¡ ××¤×©×¨×•×™×•×ª ×ª×™×§×•×Ÿ:</strong></div>';
                
                // ×›×¤×ª×•×¨ ×œ×ª×™×§×•×Ÿ ××•×˜×•××˜×™ ×©×œ ×›×œ ×”×©×’×™××•×ª
                errorHtml += '<div style="margin-bottom: 15px;">';
                errorHtml += '<button onclick="fixAllErrors()" class="btn-auto-fix">';
                errorHtml += 'ğŸš€ ×ª×§×Ÿ ××ª ×›×œ ×”×©×’×™××•×ª ××•×˜×•××˜×™×ª';
                errorHtml += '</button>';
                errorHtml += '</div>';
                
                errorHtml += '<div style="font-size: 14px; color: #856404; line-height: 1.6;">';
                errorHtml += 'â€¢ <strong>×ª×™×§×•×Ÿ ××•×˜×•××˜×™:</strong> ×œ×—×¥ ×¢×œ "×ª×§×Ÿ ××•×˜×•××˜×™×ª" ×œ×™×“ ×›×œ ×©×’×™××ª ×›×ª×™×‘<br>';
                errorHtml += 'â€¢ <strong>×‘×“×™×§×” ×‘××™×œ×•×Ÿ:</strong> ×œ×—×¥ ×¢×œ "×—×¤×© ×‘××™×œ×•×Ÿ" ×œ×•×•×“× ××ª ×”×›×ª×™×‘ ×”× ×›×•×Ÿ<br>';
                errorHtml += 'â€¢ <strong>×—×™×¤×•×© ×‘×’×•×’×œ:</strong> ×œ×—×¥ ×¢×œ "×‘×“×•×§ ×‘×’×•×’×œ" ×œ×¨××•×ª ×“×•×’×××•×ª ×œ×©×™××•×©<br>';
                errorHtml += 'â€¢ <strong>××§×•×¨ ××§×“××™:</strong> ×œ×—×¥ ×¢×œ "××§×“××™×” ×œ×œ×©×•×Ÿ" ×œ××™×“×¢ ××§×¦×•×¢×™ ×¢×œ ×”×›×ª×™×‘<br>';
                errorHtml += 'â€¢ <strong>×œ××—×¨ ×”×ª×™×§×•×Ÿ:</strong> ×œ×—×¥ ×©×•×‘ ×¢×œ "×‘×“×•×§ ×©×’×™××•×ª ×›×ª×™×‘" ×œ×•×•×“× ×©×”×›×œ ×ª×•×§×Ÿ';
                errorHtml += '</div>';
                errorHtml += '<div style="margin-top: 15px;"><small style="color: #856404;">ğŸ¯ ××ª××§×“×™× ×‘×©×’×™××•×ª ×›×ª×™×‘ ×‘×œ×‘×“ - AI ××ª×§×“× + ×‘×“×™×§×” ××§×•××™×ª ××•×ª×××ª ×œ×¢×‘×¨×™×ª</small></div>';
                errorHtml += '</div>';

                errorDetailsDiv.innerHTML = errorHtml;
                
                // ×”×•×¡×£ ××ª ×¨×©×™××ª ×”×©×’×™××•×ª ××—×¨×™ ×”×›×¤×ª×•×¨×™×
                const activeCard = document.querySelector('.step-content.active .card');
                if (activeCard) {
                    activeCard.appendChild(errorDetailsDiv);
                }
                
            } else {
                showMessage(`ğŸ‰ ××¦×•×™×Ÿ! ×œ× × ××¦××• ×©×’×™××•×ª ×›×ª×™×‘ ×‘-${totalWords} ×”××™×œ×™×. ×”×˜×§×¡×˜ ×©×œ×š ×›×ª×•×‘ × ×›×•×Ÿ ×•××•×›×Ÿ ×œ×™×¦×™×¨×ª ××ª×•×•×”!`, 'success');
            }
        }

        async function checkSpellingInText(text) {
            // ×ª×—×™×œ×” × ×‘×“×§ ×¢× ×”×‘×“×™×§×” ×”××§×•××™×ª ×”××©×•×¤×¨×ª
            let errors = checkSpellingLocal(text);
            
            // ×× ×™×© ×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜, × × ×¡×” ×œ×”×©×ª××© ×‘-LanguageTool
            try {
                const response = await fetch('https://api.languagetool.org/v2/check', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: new URLSearchParams({
                        'text': text,
                        'language': 'he',
                        'enabledOnly': 'false'
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    
                    // ×”×•×¡×£ ×©×’×™××•×ª ×-LanguageTool ×œ×©×’×™××•×ª ×”×§×™×™××•×ª
                    data.matches.forEach(match => {
                        const errorWord = text.substring(match.offset, match.offset + match.length);
                        const suggestion = match.replacements.length > 0 ? match.replacements[0].value : '××™×Ÿ ×”×¦×¢×ª ×ª×™×§×•×Ÿ';
                        
                        // ×‘×“×•×§ ×©×”×©×’×™××” ×œ× ×§×™×™××ª ×›×‘×¨
                        const existingError = errors.find(e => e.word === errorWord);
                        if (!existingError) {
                            errors.push({
                                word: errorWord,
                                suggestion: suggestion,
                                type: match.rule.category.id === 'TYPOS' ? '×©×’×™××ª ×›×ª×™×‘ (AI)' : '×©×’×™××ª ×ª×—×‘×™×¨ (AI)',
                                message: match.message || '×©×’×™××” ×©×–×•×”×ª×” ×¢×œ ×™×“×™ AI',
                                context: match.context ? match.context.text : ''
                            });
                        }
                    });
                }
            } catch (error) {
                console.log('×‘×¢×™×” ×‘×—×™×‘×•×¨ ×œ×©×™×¨×•×ª AI, ××©×ª××© ×‘×‘×“×™×§×” ××§×•××™×ª ×‘×œ×‘×“');
                // ×× ×™×© ×‘×¢×™×” ×¢× ×”×©×™×¨×•×ª, × ×©×ª××© ×¨×§ ×‘×‘×“×™×§×” ×”××§×•××™×ª ×©×›×‘×¨ ×‘×™×¦×¢× ×•
            }

            return errors;
        }

        function checkSpellingLocal(text) {
            const errors = [];
            
            // ××™×œ×•×Ÿ ××ª×§×“× ×©×œ ×©×’×™××•×ª ×›×ª×™×‘ × ×¤×•×¦×•×ª ×‘×¢×‘×¨×™×ª ×‘×œ×‘×“
            const spellingErrors = {
                // ×©×’×™××•×ª ×›×ª×™×‘ × ×¤×•×¦×•×ª - ××™×œ×™× ×‘×•×“×“×•×ª
                '×‘×¢×™×™×”': '×‘×¢×™×”',
                '×©×™×›×‘×”': '×©×›×‘×”',
                '×”×•×œ×›': '×”×•×œ×š',
                '×‘××•': '×‘×•××•',
                '××™×¤×•×': '××¤×•×',
                '×‘×›×œ×œ': '×‘×›×œ×œ',
                '××›×™×•×Ÿ': '××›×™×•×•×Ÿ',
                '×‘×¢×™×§×¨': '×‘×¢×™×§×¨',
                '×©×•×¨×©': '×©×•×¨×©',
                '×–×›×¨×•×Ÿ': '×–×™×›×¨×•×Ÿ',
                '×–×›×¨×•× ×•×ª': '×–×™×›×¨×•× ×•×ª',
                '×¢×¦×•×‘': '×¢×¦×•×‘',
                '×¢×¦×•×‘': '×¢×¦×•×‘',
                '×—×™×™×‘': '×—×™×™×‘',
                '×ª××™×“': '×ª××™×“',
                '××•×œ×™': '××•×œ×™',
                '×›× ×¨××”': '×›× ×¨××”',
                '×‘×•×•×“××™': '×‘×•×•×“××™',
                '×××©': '×××©',
                '×™×—×“': '×™×—×“',
                '×œ×‘×“': '×œ×‘×“',
                '×›××¢×˜': '×›××¢×˜',
                '×‘×“×™×•×§': '×‘×“×™×•×§',
                '×œ×’××¨×™': '×œ×’××¨×™',
                '×‘×—×œ×§': '×‘×—×œ×§',
                '×‘×’×œ×œ': '×‘×’×œ×œ',
                '×œ××¨×•×ª': '×œ××¨×•×ª',
                '×‘×–×›×•×ª': '×‘×–×›×•×ª',
                '×‘×¢×§×‘×•×ª': '×‘×¢×§×‘×•×ª',
                '×‘××§×•×': '×‘××§×•×',
                '×‘×–××Ÿ': '×‘×–××Ÿ',
                '××—×¨×™': '××—×¨×™',
                '×œ×¤× ×™': '×œ×¤× ×™',
                '×‘××”×œ×š': '×‘××”×œ×š',
                '×‘×¢×ª': '×‘×¢×ª',
                '×›××©×¨': '×›××©×¨',
                '×‘×–××Ÿ': '×‘×–××Ÿ',
                '×¨×’×¢': '×¨×’×¢',
                '×“×§×”': '×“×§×”',
                '×©×¢×”': '×©×¢×”',
                '×™×•×': '×™×•×',
                '×©×‘×•×¢': '×©×‘×•×¢',
                '×—×•×“×©': '×—×•×“×©',
                '×©× ×”': '×©× ×”',
                '×–××Ÿ': '×–××Ÿ',
                '×¢×‘×¨': '×¢×‘×¨',
                '×”×•×•×”': '×”×•×•×”',
                '×¢×ª×™×“': '×¢×ª×™×“',
                '××—×¨': '××—×¨',
                '××ª××•×œ': '××ª××•×œ',
                '×”×™×•×': '×”×™×•×',
                '×”×©×‘×•×¢': '×”×©×‘×•×¢',
                '×”×—×•×“×©': '×”×—×•×“×©',
                '×”×©× ×”': '×”×©× ×”',
                '×‘×™×ª': '×‘×™×ª',
                '×‘×ª×™×': '×‘×ª×™×',
                '×‘×™×ª ×¡×¤×¨': '×‘×™×ª ×¡×¤×¨',
                '×‘×™×ª ×—×•×œ×™×': '×‘×™×ª ×—×•×œ×™×',
                '×‘×™×ª ×›× ×¡×ª': '×‘×™×ª ×›× ×¡×ª',
                '×‘×™×ª ×§×¤×”': '×‘×™×ª ×§×¤×”',
                '××©×¤×—×”': '××©×¤×—×”',
                '××©×¤×—×•×ª': '××©×¤×—×•×ª',
                '×”×•×¨×™×': '×”×•×¨×™×',
                '×™×œ×“×™×': '×™×œ×“×™×',
                '×™×œ×“×”': '×™×œ×“×”',
                '×™×œ×“': '×™×œ×“',
                '×‘×Ÿ': '×‘×Ÿ',
                '×‘×ª': '×‘×ª',
                '××‘': '××‘',
                '××': '××',
                '××—': '××—',
                '××—×•×ª': '××—×•×ª',
                '×¡×‘×': '×¡×‘×',
                '×¡×‘×ª×': '×¡×‘×ª×',
                '×“×•×“': '×“×•×“',
                '×“×•×“×”': '×“×•×“×”',
                '×—×‘×¨': '×—×‘×¨',
                '×—×‘×¨×”': '×—×‘×¨×”',
                '×—×‘×¨×™×': '×—×‘×¨×™×',
                '×—×‘×¨×•×ª': '×—×‘×¨×•×ª',
                '×¡×¤×¨': '×¡×¤×¨',
                '×¡×¤×¨×™×': '×¡×¤×¨×™×',
                '×¢×™×ª×•×Ÿ': '×¢×™×ª×•×Ÿ',
                '×¢×™×ª×•× ×™×': '×¢×™×ª×•× ×™×',
                '××’×–×™×Ÿ': '××’×–×™×Ÿ',
                '××—×©×‘': '××—×©×‘',
                '××—×©×‘×™×': '××—×©×‘×™×',
                '×˜×œ×¤×•×Ÿ': '×˜×œ×¤×•×Ÿ',
                '×˜×œ×¤×•× ×™×': '×˜×œ×¤×•× ×™×',
                '×¨×›×‘': '×¨×›×‘',
                '×¨×›×‘×™×': '×¨×›×‘×™×',
                '××•×˜×•×‘×•×¡': '××•×˜×•×‘×•×¡',
                '××•×˜×•×‘×•×¡×™×': '××•×˜×•×‘×•×¡×™×',
                '×¨×›×‘×ª': '×¨×›×‘×ª',
                '×¨×›×‘×•×ª': '×¨×›×‘×•×ª',
                '××˜×•×¡': '××˜×•×¡',
                '××˜×•×¡×™×': '××˜×•×¡×™×',
                '××•× ×™×”': '××•× ×™×”',
                '××•× ×™×•×ª': '××•× ×™×•×ª',
                '×‘×’×“': '×‘×’×“',
                '×‘×’×“×™×': '×‘×’×“×™×',
                '×—×•×œ×¦×”': '×—×•×œ×¦×”',
                '×—×•×œ×¦×•×ª': '×—×•×œ×¦×•×ª',
                '××›× ×¡×™×™×': '××›× ×¡×™×™×',
                '×©××œ×”': '×©××œ×”',
                '×©××œ×•×ª': '×©××œ×•×ª',
                '× ×¢×œ': '× ×¢×œ',
                '× ×¢×œ×™×™×': '× ×¢×œ×™×™×',
                '×’×¨×‘': '×’×¨×‘',
                '×’×¨×‘×™×™×': '×’×¨×‘×™×™×',
                '××¢×™×œ': '××¢×™×œ',
                '××¢×™×œ×™×': '××¢×™×œ×™×',
                '×›×•×‘×¢': '×›×•×‘×¢',
                '×›×•×‘×¢×™×': '×›×•×‘×¢×™×',
                '××©×§×¤×™×™×': '××©×§×¤×™×™×',
                '×©×¢×•×Ÿ': '×©×¢×•×Ÿ',
                '×©×¢×•× ×™×': '×©×¢×•× ×™×',
                '×ª×™×§': '×ª×™×§',
                '×ª×™×§×™×': '×ª×™×§×™×',
                '××—×‘×¨×ª': '××—×‘×¨×ª',
                '××—×‘×¨×•×ª': '××—×‘×¨×•×ª',
                '×¢×™×¤×¨×•×Ÿ': '×¢×™×¤×¨×•×Ÿ',
                '×¢×™×¤×¨×•× ×•×ª': '×¢×™×¤×¨×•× ×•×ª',
                '×¢×˜': '×¢×˜',
                '×¢×˜×™×': '×¢×˜×™×',
                '××—×§': '××—×§',
                '××—×§×™×': '××—×§×™×',
                '×¡×¨×’×œ': '×¡×¨×’×œ',
                '×¡×¨×’×œ×™×': '×¡×¨×’×œ×™×',
                '××¡×¤×¨×™×™×': '××¡×¤×¨×™×™×',
                '×“×‘×§': '×“×‘×§',
                '× ×™×™×¨': '× ×™×™×¨',
                '× ×™×™×¨×•×ª': '× ×™×™×¨×•×ª',
                '×©×•×œ×—×Ÿ': '×©×•×œ×—×Ÿ',
                '×©×•×œ×—× ×•×ª': '×©×•×œ×—× ×•×ª',
                '×›×™×¡×': '×›×™×¡×',
                '×›×™×¡××•×ª': '×›×™×¡××•×ª',
                '××™×˜×”': '××™×˜×”',
                '××™×˜×•×ª': '××™×˜×•×ª',
                '××¨×•×Ÿ': '××¨×•×Ÿ',
                '××¨×•× ×•×ª': '××¨×•× ×•×ª',
                '×—×œ×•×Ÿ': '×—×œ×•×Ÿ',
                '×—×œ×•× ×•×ª': '×—×œ×•× ×•×ª',
                '×“×œ×ª': '×“×œ×ª',
                '×“×œ×ª×•×ª': '×“×œ×ª×•×ª',
                '×§×™×¨': '×§×™×¨',
                '×§×™×¨×•×ª': '×§×™×¨×•×ª',
                '×ª×§×¨×”': '×ª×§×¨×”',
                '×ª×§×¨×•×ª': '×ª×§×¨×•×ª',
                '×¨×¦×¤×”': '×¨×¦×¤×”',
                '×¨×¦×¤×•×ª': '×¨×¦×¤×•×ª',
                '××˜×‘×—': '××˜×‘×—',
                '××˜×‘×—×™×': '××˜×‘×—×™×',
                '×—×“×¨': '×—×“×¨',
                '×—×“×¨×™×': '×—×“×¨×™×',
                '×¡×œ×•×Ÿ': '×¡×œ×•×Ÿ',
                '×¡×œ×•× ×™×': '×¡×œ×•× ×™×',
                '×—×“×¨ ×©×™× ×”': '×—×“×¨ ×©×™× ×”',
                '×—×“×¨×™ ×©×™× ×”': '×—×“×¨×™ ×©×™× ×”',
                '×—×“×¨ ×××‘×˜×™×”': '×—×“×¨ ×××‘×˜×™×”',
                '×—×“×¨×™ ×××‘×˜×™×”': '×—×“×¨×™ ×××‘×˜×™×”',
                '××¨×¤×¡×ª': '××¨×¤×¡×ª',
                '××¨×¤×¡×•×ª': '××¨×¤×¡×•×ª',
                '×’×™× ×”': '×’×™× ×”',
                '×’×™× ×•×ª': '×’×™× ×•×ª',
                '×¢×¥': '×¢×¥',
                '×¢×¦×™×': '×¢×¦×™×',
                '×¤×¨×—': '×¤×¨×—',
                '×¤×¨×—×™×': '×¤×¨×—×™×',
                '×“×©×': '×“×©×',
                '×“×©××™×': '×“×©××™×',
                '×©××©': '×©××©',
                '×™×¨×—': '×™×¨×—',
                '×›×•×›×‘': '×›×•×›×‘',
                '×›×•×›×‘×™×': '×›×•×›×‘×™×',
                '×©××™×™×': '×©××™×™×',
                '×¢× ×Ÿ': '×¢× ×Ÿ',
                '×¢× × ×™×': '×¢× × ×™×',
                '×’×©×': '×’×©×',
                '×’×©××™×': '×’×©××™×',
                '×¨×•×—': '×¨×•×—',
                '×¨×•×—×•×ª': '×¨×•×—×•×ª',
                '×¡×¢×¨': '×¡×¢×¨',
                '×¡×¢×¨×•×ª': '×¡×¢×¨×•×ª',
                '×©×œ×’': '×©×œ×’',
                '×©×œ×’×™×': '×©×œ×’×™×',
                '×§×¨×—': '×§×¨×—',
                '×—×•×': '×—×•×',
                '×§×•×¨': '×§×•×¨',
                '××•×›×œ': '××•×›×œ',
                '××–×•×Ÿ': '××–×•×Ÿ',
                '×œ×—×': '×œ×—×',
                '×œ×—××™×': '×œ×—××™×',
                '×—×œ×‘': '×—×œ×‘',
                '×’×‘×™× ×”': '×’×‘×™× ×”',
                '×’×‘×™× ×•×ª': '×’×‘×™× ×•×ª',
                '×‘×™×¦×”': '×‘×™×¦×”',
                '×‘×™×¦×™×': '×‘×™×¦×™×',
                '×‘×©×¨': '×‘×©×¨',
                '×“×’': '×“×’',
                '×“×’×™×': '×“×’×™×',
                '×¢×•×£': '×¢×•×£',
                '×¢×•×¤×•×ª': '×¢×•×¤×•×ª',
                '×™×¨×§': '×™×¨×§',
                '×™×¨×§×•×ª': '×™×¨×§×•×ª',
                '×¤×¨×™': '×¤×¨×™',
                '×¤×™×¨×•×ª': '×¤×™×¨×•×ª',
                '×ª×¤×•×—': '×ª×¤×•×—',
                '×ª×¤×•×—×™×': '×ª×¤×•×—×™×',
                '×‘× × ×”': '×‘× × ×”',
                '×‘× × ×•×ª': '×‘× × ×•×ª',
                '××’×¡': '××’×¡',
                '××’×¡×™×': '××’×¡×™×',
                '×ª×¤×•×–': '×ª×¤×•×–',
                '×ª×¤×•×–×™×': '×ª×¤×•×–×™×',
                '×œ×™××•×Ÿ': '×œ×™××•×Ÿ',
                '×œ×™××•× ×™×': '×œ×™××•× ×™×',
                '×’×–×¨': '×’×–×¨',
                '×’×–×¨×™×': '×’×–×¨×™×',
                '×¢×’×‘× ×™×”': '×¢×’×‘× ×™×”',
                '×¢×’×‘× ×™×•×ª': '×¢×’×‘× ×™×•×ª',
                '××œ×¤×¤×•×Ÿ': '××œ×¤×¤×•×Ÿ',
                '××œ×¤×¤×•× ×™×': '××œ×¤×¤×•× ×™×',
                '×‘×¦×œ': '×‘×¦×œ',
                '×‘×¦×œ×™×': '×‘×¦×œ×™×',
                '×©×•×': '×©×•×',
                '×¤×œ×¤×œ': '×¤×œ×¤×œ',
                '×¤×œ×¤×œ×™×': '×¤×œ×¤×œ×™×',
                '××™×': '××™×',
                '××™×¥': '××™×¥',
                '××™×¦×™×': '××™×¦×™×',
                '×§×¤×”': '×§×¤×”',
                '×ª×”': '×ª×”',
                '×©×•×§×•×œ×“': '×©×•×§×•×œ×“',
                '×©×•×§×•×œ×“×™×': '×©×•×§×•×œ×“×™×',
                '×¢×•×’×”': '×¢×•×’×”',
                '×¢×•×’×•×ª': '×¢×•×’×•×ª',
                '×××ª×§': '×××ª×§',
                '×××ª×§×™×': '×××ª×§×™×',
                '×¨×•×¤×': '×¨×•×¤×',
                '×¨×•×¤××™×': '×¨×•×¤××™×',
                '×¨×•×¤××”': '×¨×•×¤××”',
                '×¨×•×¤××•×ª': '×¨×•×¤××•×ª',
                '××—×•×ª': '××—×•×ª',
                '××—×™×•×ª': '××—×™×•×ª',
                '××•×¨×”': '××•×¨×”',
                '××•×¨×™×': '××•×¨×™×',
                '××•×¨×•×ª': '××•×¨×•×ª',
                '×ª×œ××™×“': '×ª×œ××™×“',
                '×ª×œ××™×“×™×': '×ª×œ××™×“×™×',
                '×ª×œ××™×“×”': '×ª×œ××™×“×”',
                '×ª×œ××™×“×•×ª': '×ª×œ××™×“×•×ª',
                '×¡×˜×•×“× ×˜': '×¡×˜×•×“× ×˜',
                '×¡×˜×•×“× ×˜×™×': '×¡×˜×•×“× ×˜×™×',
                '×¡×˜×•×“× ×˜×™×ª': '×¡×˜×•×“× ×˜×™×ª',
                '×¡×˜×•×“× ×˜×™×•×ª': '×¡×˜×•×“× ×˜×™×•×ª',
                '×¤×¨×•×¤×¡×•×¨': '×¤×¨×•×¤×¡×•×¨',
                '×¤×¨×•×¤×¡×•×¨×™×': '×¤×¨×•×¤×¡×•×¨×™×',
                '×“×•×§×˜×•×¨': '×“×•×§×˜×•×¨',
                '×“×•×§×˜×•×¨×™×': '×“×•×§×˜×•×¨×™×',
                '×¢×•×¨×š ×“×™×Ÿ': '×¢×•×¨×š ×“×™×Ÿ',
                '×¢×•×¨×›×™ ×“×™×Ÿ': '×¢×•×¨×›×™ ×“×™×Ÿ',
                '××”× ×“×¡': '××”× ×“×¡',
                '××”× ×“×¡×™×': '××”× ×“×¡×™×',
                '××”× ×“×¡×ª': '××”× ×“×¡×ª',
                '××”× ×“×¡×•×ª': '××”× ×“×¡×•×ª',
                '×—×©×‘×•×Ÿ': '×—×©×‘×•×Ÿ',
                '×—×©×‘×•× ×•×ª': '×—×©×‘×•× ×•×ª',
                '××ª××˜×™×§×”': '××ª××˜×™×§×”',
                '×¤×™×–×™×§×”': '×¤×™×–×™×§×”',
                '×›×™××™×”': '×›×™××™×”',
                '×‘×™×•×œ×•×’×™×”': '×‘×™×•×œ×•×’×™×”',
                '×”×™×¡×˜×•×¨×™×”': '×”×™×¡×˜×•×¨×™×”',
                '×’×™××•×’×¨×¤×™×”': '×’×™××•×’×¨×¤×™×”',
                '×¡×¤×¨×•×ª': '×¡×¤×¨×•×ª',
                '×¢×‘×¨×™×ª': '×¢×‘×¨×™×ª',
                '×× ×’×œ×™×ª': '×× ×’×œ×™×ª',
                '×¦×¨×¤×ª×™×ª': '×¦×¨×¤×ª×™×ª',
                '×’×¨×× ×™×ª': '×’×¨×× ×™×ª',
                '×¡×¤×¨×“×™×ª': '×¡×¤×¨×“×™×ª',
                '×¨×•×¡×™×ª': '×¨×•×¡×™×ª',
                '×¢×¨×‘×™×ª': '×¢×¨×‘×™×ª',
                '××× ×•×ª': '××× ×•×ª',
                '××•×–×™×§×”': '××•×–×™×§×”',
                '×¡×¤×•×¨×˜': '×¡×¤×•×¨×˜',
                '×›×“×•×¨×’×œ': '×›×“×•×¨×’×œ',
                '×›×“×•×¨×¡×œ': '×›×“×•×¨×¡×œ',
                '×˜× ×™×¡': '×˜× ×™×¡',
                '×©×—×™×™×”': '×©×—×™×™×”',
                '×¨×™×¦×”': '×¨×™×¦×”',
                '×”×œ×™×›×”': '×”×œ×™×›×”',
                '×¨×›×™×‘×”': '×¨×›×™×‘×”',
                '××©×—×§': '××©×—×§',
                '××©×—×§×™×': '××©×—×§×™×',
                '××—×©×‘': '××—×©×‘',
                '××—×©×‘×™×': '××—×©×‘×™×',
                '×˜×œ×•×•×™×–×™×”': '×˜×œ×•×•×™×–×™×”',
                '×˜×œ×•×•×™×–×™×•×ª': '×˜×œ×•×•×™×–×™×•×ª',
                '×¨×“×™×•': '×¨×“×™×•',
                '×¨×“×™×•××™×': '×¨×“×™×•××™×',
                '×¡×¨×˜': '×¡×¨×˜',
                '×¡×¨×˜×™×': '×¡×¨×˜×™×',
                '×ª×•×›× ×™×ª': '×ª×•×›× ×™×ª',
                '×ª×•×›× ×™×•×ª': '×ª×•×›× ×™×•×ª',
                '×©×™×¨': '×©×™×¨',
                '×©×™×¨×™×': '×©×™×¨×™×',
                '×–××¨': '×–××¨',
                '×–××¨×™×': '×–××¨×™×',
                '×–××¨×ª': '×–××¨×ª',
                '×–××¨×•×ª': '×–××¨×•×ª',
                '×¦×™×•×¨': '×¦×™×•×¨',
                '×¦×™×•×¨×™×': '×¦×™×•×¨×™×',
                '×¦×™×œ×•×': '×¦×™×œ×•×',
                '×¦×™×œ×•××™×': '×¦×™×œ×•××™×',
                '×ª××•× ×”': '×ª××•× ×”',
                '×ª××•× ×•×ª': '×ª××•× ×•×ª',
                '×¦×‘×¢': '×¦×‘×¢',
                '×¦×‘×¢×™×': '×¦×‘×¢×™×',
                '××“×•×': '××“×•×',
                '×›×—×•×œ': '×›×—×•×œ',
                '×™×¨×•×§': '×™×¨×•×§',
                '×¦×”×•×‘': '×¦×”×•×‘',
                '×¡×’×•×œ': '×¡×’×•×œ',
                '×›×ª×•×': '×›×ª×•×',
                '×•×¨×•×“': '×•×¨×•×“',
                '×—×•×': '×—×•×',
                '×©×—×•×¨': '×©×—×•×¨',
                '×œ×‘×Ÿ': '×œ×‘×Ÿ',
                '××¤×•×¨': '××¤×•×¨',
                '×›×¡×£': '×›×¡×£',
                '×–×”×‘': '×–×”×‘',
                '×‘×¨×•× ×–×”': '×‘×¨×•× ×–×”',
                '××¡×¤×¨': '××¡×¤×¨',
                '××¡×¤×¨×™×': '××¡×¤×¨×™×',
                '××—×“': '××—×“',
                '×©× ×™×™×': '×©× ×™×™×',
                '×©×œ×•×©×”': '×©×œ×•×©×”',
                '××¨×‘×¢×”': '××¨×‘×¢×”',
                '×—××™×©×”': '×—××™×©×”',
                '×©×™×©×”': '×©×™×©×”',
                '×©×‘×¢×”': '×©×‘×¢×”',
                '×©××•× ×”': '×©××•× ×”',
                '×ª×©×¢×”': '×ª×©×¢×”',
                '×¢×©×¨×”': '×¢×©×¨×”',
                '×¢×©×¨×™×': '×¢×©×¨×™×',
                '×©×œ×•×©×™×': '×©×œ×•×©×™×',
                '××¨×‘×¢×™×': '××¨×‘×¢×™×',
                '×—××™×©×™×': '×—××™×©×™×',
                '×©×™×©×™×': '×©×™×©×™×',
                '×©×‘×¢×™×': '×©×‘×¢×™×',
                '×©××•× ×™×': '×©××•× ×™×',
                '×ª×©×¢×™×': '×ª×©×¢×™×',
                '×××”': '×××”',
                '××œ×£': '××œ×£',
                '××™×œ×™×•×Ÿ': '××™×œ×™×•×Ÿ'
            };

            // ×‘×“×™×§×ª ×©×’×™××•×ª ×›×ª×™×‘ × ×¤×•×¦×•×ª
            Object.keys(spellingErrors).forEach(wrongWord => {
                const regex = new RegExp('\\b' + wrongWord.replace(/[.*+?^${}()|[\]\\]/g, '\\        function checkSpellingLocal(text) {
            const errors = [];
            
            // ××™×œ×•×Ÿ ××•×¨×—×‘ ×©×œ ×©×’×™××•×ª ×›×ª×™×‘ × ×¤×•×¦×•×ª ×‘×¢×‘×¨×™×ª
            const commonErrors = {
                // ×©×’×™××•×ª ×›×ª×™×‘ × ×¤×•×¦×•×ª
                '×‘×¢×™×™×”': '×‘×¢×™×”',
                '×©×™×›×‘×”': '×©×›×‘×”', 
                '×”×•×œ×›': '×”×•×œ×š',
                '×‘××•': '×‘×•××•',
                '×©××œ×ª×™': '×©××œ×ª×™',
                '×¢× ×ª×™': '×¢× ×™×ª×™',
                '×›×ª×™×‘×ª×™': '×›×ª×‘×ª×™',
                '×§×¨××ª×™': '×§×¨××ª×™',
                '×©××¢×ª×™': '×©××¢×ª×™',
                '×”×‘× ×ª×™': '×”×‘× ×ª×™',
                '×¨××™×ª×™': '×¨××™×ª×™',
                '×¢×©×™×ª×™': '×¢×©×™×ª×™',
                '×××¨×ª×™': '×××¨×ª×™',
                '× ×ª×ª×™': '× ×ª×ª×™',
                '×œ×§×—×ª×™': '×œ×§×—×ª×™',
                '×§× ×™×ª×™': '×§× ×™×ª×™',
                '××›×¨×ª×™': '××›×¨×ª×™',
                '×”×œ×›×ª×™': '×”×œ×›×ª×™',
                '×‘××ª×™': '×‘××ª×™',
                '×™×¦××ª×™': '×™×¦××ª×™',
                '× ×›× ×¡×ª×™': '× ×›× ×¡×ª×™',
                '×™×©×‘×ª×™': '×™×©×‘×ª×™',
                '×¢××“×ª×™': '×¢××“×ª×™',
                '×¨×¦×ª×™': '×¨×¦×ª×™',
                '×©×™×—×§×ª×™': '×©×™×—×§×ª×™',
                '×œ××“×ª×™': '×œ××“×ª×™',
                '×¢×‘×“×ª×™': '×¢×‘×“×ª×™',
                '××”×‘×ª×™': '××”×‘×ª×™',
                '×©× ××ª×™': '×©× ××ª×™',
                '×¤×—×“×ª×™': '×¤×—×“×ª×™',
                '×©××—×ª×™': '×©××—×ª×™',
                '×‘×›×™×ª×™': '×‘×›×™×ª×™',
                '×¦×—×§×ª×™': '×¦×—×§×ª×™',
                '×—×©×‘×ª×™': '×—×©×‘×ª×™',
                '×–×›×¨×ª×™': '×–×›×¨×ª×™',
                '×©×›×—×ª×™': '×©×›×—×ª×™',
                '×”×¨×’×©×ª×™': '×”×¨×’×©×ª×™',
                '×”×ª×—×œ×ª×™': '×”×ª×—×œ×ª×™',
                '×¡×™×™××ª×™': '×¡×™×™××ª×™',
                '×”××©×›×ª×™': '×”××©×›×ª×™',
                '×¢×¦×¨×ª×™': '×¢×¦×¨×ª×™',
                '×—×–×¨×ª×™': '×—×–×¨×ª×™',
                '×”×’×¢×ª×™': '×”×’×¢×ª×™',
                '×¢×–×‘×ª×™': '×¢×–×‘×ª×™',
                '× ×©××¨×ª×™': '× ×©××¨×ª×™',
                '×—×™×›×™×ª×™': '×—×™×›×™×ª×™',
                '×§×™×•×•×™×ª×™': '×§×™×•×•×™×ª×™',
                '×¨×¦×™×ª×™': '×¨×¦×™×ª×™',
                '×™×›×•×œ×ª×™': '×™×›×•×œ×ª×™',
                '×”×™×™×ª×™ ×¦×¨×™×š': '×”×™×™×ª×™ ×¦×¨×™×š',
                '×”×™×™×ª×™ ×—×™×™×‘': '×”×™×™×ª×™ ×—×™×™×‘',
                '×”×™×™×ª×™ ×××•×¨': '×”×™×™×ª×™ ×××•×¨',
                '×”×™×™×ª×™ ×¨×•×¦×”': '×”×™×™×ª×™ ×¨×•×¦×”',
                '×”×™×™×ª×™ ×™×›×•×œ': '×”×™×™×ª×™ ×™×›×•×œ',
                '×”×™×™×ª×™ ××•×”×‘': '×”×™×™×ª×™ ××•×”×‘',
                '×”×™×™×ª×™ ××§×•×•×”': '×”×™×™×ª×™ ××§×•×•×”',
                '×”×™×™×ª×™ ×—×•×©×‘': '×”×™×™×ª×™ ×—×•×©×‘',
                '×”×™×™×ª×™ ××××™×Ÿ': '×”×™×™×ª×™ ××××™×Ÿ',
                '×”×™×™×ª×™ ××¨×’×™×©': '×”×™×™×ª×™ ××¨×’×™×©',
                '×”×™×™×ª×™ ××‘×™×Ÿ': '×”×™×™×ª×™ ××‘×™×Ÿ',
                '×”×™×™×ª×™ ×™×•×“×¢': '×”×™×™×ª×™ ×™×•×“×¢',
                '×”×™×™×ª×™ ×–×•×›×¨': '×”×™×™×ª×™ ×–×•×›×¨',
                '×”×™×™×ª×™ ×©×•×›×—': '×”×™×™×ª×™ ×©×•×›×—',
                '×”×™×™×ª×™ ×œ×•××“': '×”×™×™×ª×™ ×œ×•××“',
                '×”×™×™×ª×™ ×¢×•×‘×“': '×”×™×™×ª×™ ×¢×•×‘×“',
                '×”×™×™×ª×™ ××©×—×§': '×”×™×™×ª×™ ××©×—×§',
                '×”×™×™×ª×™ ×§×•×¨×': '×”×™×™×ª×™ ×§×•×¨×',
                '×”×™×™×ª×™ ×›×•×ª×‘': '×”×™×™×ª×™ ×›×•×ª×‘',
                '×”×™×™×ª×™ ××“×‘×¨': '×”×™×™×ª×™ ××“×‘×¨',
                '×”×™×™×ª×™ ×©×•×ª×§': '×”×™×™×ª×™ ×©×•×ª×§',
                '×”×™×™×ª×™ ×¦×•×¢×§': '×”×™×™×ª×™ ×¦×•×¢×§',
                '×”×™×™×ª×™ ×œ×•×—×©': '×”×™×™×ª×™ ×œ×•×—×©',
                '×”×™×™×ª×™ ×©×¨': '×”×™×™×ª×™ ×©×¨',
                '×”×™×™×ª×™ ×¨×•×§×“': '×”×™×™×ª×™ ×¨×•×§×“',
                '×”×™×™×ª×™ ×‘×•×›×”': '×”×™×™×ª×™ ×‘×•×›×”',
                '×”×™×™×ª×™ ×¦×•×—×§': '×”×™×™×ª×™ ×¦×•×—×§',
                '×”×™×™×ª×™ ×™×©×Ÿ': '×”×™×™×ª×™ ×™×©×Ÿ',
                '×”×™×™×ª×™ ×¢×¨': '×”×™×™×ª×™ ×¢×¨',
                '×”×™×™×ª×™ ×¢×™×™×£': '×”×™×™×ª×™ ×¢×™×™×£',
                '×”×™×™×ª×™ ×‘×¨×™×': '×”×™×™×ª×™ ×‘×¨×™×',
                '×”×™×™×ª×™ ×—×•×œ×”': '×”×™×™×ª×™ ×—×•×œ×”',
                '×”×™×™×ª×™ ×¨×¢×‘': '×”×™×™×ª×™ ×¨×¢×‘',
                '×”×™×™×ª×™ ×¦××': '×”×™×™×ª×™ ×¦××',
                '×”×™×™×ª×™ ×§×¨': '×”×™×™×ª×™ ×§×¨',
                '×”×™×™×ª×™ ×—×': '×”×™×™×ª×™ ×—×',
                '×”×™×™×ª×™ ×××•×©×¨': '×”×™×™×ª×™ ×××•×©×¨',
                '×”×™×™×ª×™ ×¢×¦×•×‘': '×”×™×™×ª×™ ×¢×¦×•×‘',
                '×”×™×™×ª×™ ×›×•×¢×¡': '×”×™×™×ª×™ ×›×•×¢×¡',
                '×”×™×™×ª×™ ×¨×’×•×¢': '×”×™×™×ª×™ ×¨×’×•×¢',
                '×”×™×™×ª×™ ×œ×—×•×¥': '×”×™×™×ª×™ ×œ×—×•×¥',
                '×”×™×™×ª×™ ××•×“××’': '×”×™×™×ª×™ ××•×“××’',
                '×”×™×™×ª×™ ×‘×˜×•×—': '×”×™×™×ª×™ ×‘×˜×•×—',
                '×”×™×™×ª×™ ×—×•×©×©': '×”×™×™×ª×™ ×—×•×©×©',
                '×”×™×™×ª×™ ××¤×—×“': '×”×™×™×ª×™ ××¤×—×“',
                '×”×™×™×ª×™ ×××™×¥': '×”×™×™×ª×™ ×××™×¥',
                '×”×™×™×ª×™ ×—×–×§': '×”×™×™×ª×™ ×—×–×§',
                '×”×™×™×ª×™ ×—×œ×©': '×”×™×™×ª×™ ×—×œ×©',
                '×”×™×™×ª×™ ×’×“×•×œ': '×”×™×™×ª×™ ×’×“×•×œ',
                '×”×™×™×ª×™ ×§×˜×Ÿ': '×”×™×™×ª×™ ×§×˜×Ÿ',
                '×”×™×™×ª×™ ×’×‘×•×”': '×”×™×™×ª×™ ×’×‘×•×”',
                '×”×™×™×ª×™ × ××•×š': '×”×™×™×ª×™ × ××•×š',
                '×”×™×™×ª×™ ×™×¤×”': '×”×™×™×ª×™ ×™×¤×”',
                '×”×™×™×ª×™ ××›×•×¢×¨': '×”×™×™×ª×™ ××›×•×¢×¨',
                '×”×™×™×ª×™ ×—×›×': '×”×™×™×ª×™ ×—×›×',
                '×”×™×™×ª×™ ×˜×™×¤×©': '×”×™×™×ª×™ ×˜×™×¤×©',
                '×”×™×™×ª×™ ××”×™×¨': '×”×™×™×ª×™ ××”×™×¨',
                '×”×™×™×ª×™ ××™×˜×™': '×”×™×™×ª×™ ××™×˜') + '\\b', 'gi');
                const matches = text.match(regex);
                if (matches) {
                    matches.forEach(() => {
                        errors.push({
                            word: wrongWord,
                            suggestion: spellingErrors[wrongWord],
                            type: '×©×’×™××ª ×›×ª×™×‘',
                            message: '××™×œ×” ×¢× ×©×’×™××ª ×›×ª×™×‘ × ×¤×•×¦×” ×‘×¢×‘×¨×™×ª'
                        });
                    });
                }
            });

            // ×‘×“×™×§×ª ×—×–×¨×•×ª ××™×•×ª×¨×•×ª ×¢×œ ××™×œ×™× (×¨×§ ×× ×–×” ×©×’×™××ª ×›×ª×™×‘ ×××™×ª×™×ª)
            const words = text.split(/\s+/);
            for (let i = 0; i < words.length - 1; i++) {
                const cleanWord1 = words[i].replace(/[^\u0590-\u05FF\u0041-\u005A\u0061-\u007A]/g, '');
                const cleanWord2 = words[i + 1].replace(/[^\u0590-\u05FF\u0041-\u005A\u0061-\u007A]/g, '');
                
                if (cleanWord1.toLowerCase() === cleanWord2.toLowerCase() && cleanWord1.length > 3) {
                    errors.push({
                        word: cleanWord1,
                        suggestion: '×”×¡×¨ ××ª ×”×—×–×¨×” ×”××™×•×ª×¨×ª',
                        type: '×—×–×¨×” ××™×•×ª×¨×ª',
                        message: '××™×œ×” ×—×•×–×¨×ª ×¤×¢××™×™× ×‘×¨×¦×£ - ×–×•×”×™ ×©×’×™××ª ×›×ª×™×‘'
                    });
                }
            }

            return errors;
        }×™',
                '×”×™×™×ª×™ ×–×”×™×¨': '×”×™×™×ª×™ ×–×”×™×¨',
                '×”×™×™×ª×™ ×¤×–×™×–': '×”×™×™×ª×™ ×¤×–×™×–',
                '×”×™×™×ª×™ ×¡×‘×œ× ×™': '×”×™×™×ª×™ ×¡×‘×œ× ×™',
                '×”×™×™×ª×™ ×—×¡×¨ ×¡×‘×œ× ×•×ª': '×”×™×™×ª×™ ×—×¡×¨ ×¡×‘×œ× ×•×ª',
                '×”×™×™×ª×™ × ×“×™×‘': '×”×™×™×ª×™ × ×“×™×‘',
                '×”×™×™×ª×™ ×§××¦×Ÿ': '×”×™×™×ª×™ ×§××¦×Ÿ',
                '×”×™×™×ª×™ ×˜×•×‘': '×”×™×™×ª×™ ×˜×•×‘',
                '×”×™×™×ª×™ ×¨×¢': '×”×™×™×ª×™ ×¨×¢',
                '×”×™×™×ª×™ ×¦×•×“×§': '×”×™×™×ª×™ ×¦×•×“×§',
                '×”×™×™×ª×™ ×˜×•×¢×”': '×”×™×™×ª×™ ×˜×•×¢×”',
                '×”×™×™×ª×™ × ×›×•×Ÿ': '×”×™×™×ª×™ × ×›×•×Ÿ',
                '×”×™×™×ª×™ ×©×’×•×™': '×”×™×™×ª×™ ×©×’×•×™',
                '×”×™×™×ª×™ ×××™×ª×™': '×”×™×™×ª×™ ×××™×ª×™',
                '×”×™×™×ª×™ ××–×•×™×£': '×”×™×™×ª×™ ××–×•×™×£',
                '×”×™×™×ª×™ ×›× ×”': '×”×™×™×ª×™ ×›× ×”',
                '×”×™×™×ª×™ ×©×§×¨×Ÿ': '×”×™×™×ª×™ ×©×§×¨×Ÿ',
                '×”×™×™×ª×™ ×™×©×¨': '×”×™×™×ª×™ ×™×©×¨',
                '×”×™×™×ª×™ ×¢×§×•×': '×”×™×™×ª×™ ×¢×§×•×',
                '×”×™×™×ª×™ ×¤×ª×•×—': '×”×™×™×ª×™ ×¤×ª×•×—',
                '×”×™×™×ª×™ ×¡×’×•×¨': '×”×™×™×ª×™ ×¡×’×•×¨',
                '×”×™×™×ª×™ ×—×•×¤×©×™': '×”×™×™×ª×™ ×—×•×¤×©×™',
                '×”×™×™×ª×™ ×›×œ×•×': '×”×™×™×ª×™ ×›×œ×•×',
                '×”×™×™×ª×™ ×¢×¦×××™': '×”×™×™×ª×™ ×¢×¦×××™',
                '×”×™×™×ª×™ ×ª×œ×•×™': '×”×™×™×ª×™ ×ª×œ×•×™',
                '×”×™×™×ª×™ ×‘×™×ª×™': '×”×™×™×ª×™ ×‘×‘×™×ª',
                '×”×™×™×ª×™ ×‘×—×•×¥': '×”×™×™×ª×™ ×‘×—×•×¥',
                '×”×™×™×ª×™ ×‘×¤× ×™×': '×”×™×™×ª×™ ×‘×¤× ×™×',
                '×”×™×™×ª×™ ×œ××¢×œ×”': '×”×™×™×ª×™ ×œ××¢×œ×”',
                '×”×™×™×ª×™ ×œ××˜×”': '×”×™×™×ª×™ ×œ××˜×”',
                '×”×™×™×ª×™ ×œ×™×“': '×”×™×™×ª×™ ×œ×™×“',
                '×”×™×™×ª×™ ×¨×—×•×§': '×”×™×™×ª×™ ×¨×—×•×§',
                '×”×™×™×ª×™ ×§×¨×•×‘': '×”×™×™×ª×™ ×§×¨×•×‘',
                '×”×™×™×ª×™ ×›××Ÿ': '×”×™×™×ª×™ ×›××Ÿ',
                '×”×™×™×ª×™ ×©×': '×”×™×™×ª×™ ×©×',
                '×”×™×™×ª×™ ×¢×': '×”×™×™×ª×™ ×¢×',
                '×”×™×™×ª×™ ×‘×œ×™': '×”×™×™×ª×™ ×‘×œ×™',
                '×”×™×™×ª×™ ×œ×‘×“': '×”×™×™×ª×™ ×œ×‘×“',
                '×”×™×™×ª×™ ×‘×™×—×“': '×”×™×™×ª×™ ×‘×™×—×“',
                '×”×™×™×ª×™ ×§×•×“×': '×”×™×™×ª×™ ×§×•×“×',
                '×”×™×™×ª×™ ××—×¨ ×›×š': '×”×™×™×ª×™ ××—×¨ ×›×š',
                '×”×™×™×ª×™ ×¢×›×©×™×•': '×”×™×™×ª×™ ×¢×›×©×™×•',
                '×”×™×™×ª×™ ××–': '×”×™×™×ª×™ ××–',
                '×”×™×™×ª×™ ×¤×¢×': '×”×™×™×ª×™ ×¤×¢×',
                '×”×™×™×ª×™ ×ª××™×“': '×”×™×™×ª×™ ×ª××™×“',
                '×”×™×™×ª×™ ×œ×¤×¢××™×': '×”×™×™×ª×™ ×œ×¤×¢××™×',
                '×”×™×™×ª×™ ×œ×¢×•×œ×': '×”×™×™×ª×™ ×œ×¢×•×œ×',
                '×”×™×™×ª×™ ××£ ×¤×¢×': '×”×™×™×ª×™ ××£ ×¤×¢×',
                '×”×™×™×ª×™ ×›×œ ×”×–××Ÿ': '×”×™×™×ª×™ ×›×œ ×”×–××Ÿ',
                '×”×™×™×ª×™ ×”×¨×‘×”': '×”×™×™×ª×™ ×”×¨×‘×”',
                '×”×™×™×ª×™ ××¢×˜': '×”×™×™×ª×™ ××¢×˜',
                '×”×™×™×ª×™ ×“×™': '×”×™×™×ª×™ ×“×™',
                '×”×™×™×ª×™ ××“×™': '×”×™×™×ª×™ ××“×™',
                '×”×™×™×ª×™ ×™×•×ª×¨': '×”×™×™×ª×™ ×™×•×ª×¨',
                '×”×™×™×ª×™ ×¤×—×•×ª': '×”×™×™×ª×™ ×¤×—×•×ª',
                '×”×™×™×ª×™ ×”×›×™': '×”×™×™×ª×™ ×”×›×™',
                '×”×™×™×ª×™ ×›×›×”': '×”×™×™×ª×™ ×›×›×”',
                '×”×™×™×ª×™ ×›×š': '×”×™×™×ª×™ ×›×š',
                '×”×™×™×ª×™ ×›××•': '×”×™×™×ª×™ ×›××•',
                '×”×™×™×ª×™ ×‘×’×œ×œ': '×”×™×™×ª×™ ×‘×’×œ×œ',
                '×”×™×™×ª×™ ×œ××¨×•×ª': '×”×™×™×ª×™ ×œ××¨×•×ª',
                '×”×™×™×ª×™ ×‘×–×›×•×ª': '×”×™×™×ª×™ ×‘×–×›×•×ª',
                '×”×™×™×ª×™ ×‘×¢×§×‘×•×ª': '×”×™×™×ª×™ ×‘×¢×§×‘×•×ª',
                '×”×™×™×ª×™ ×œ×›×Ÿ': '×”×™×™×ª×™ ×œ×›×Ÿ',
                '×”×™×™×ª×™ ××–': '×”×™×™×ª×™ ××–',
                '×”×™×™×ª×™ ××—×¨×ª': '×”×™×™×ª×™ ××—×¨×ª',
                '×”×™×™×ª×™ ××•×œ×™': '×”×™×™×ª×™ ××•×œ×™',
                '×”×™×™×ª×™ ×‘×•×•×“××™': '×”×™×™×ª×™ ×‘×•×•×“××™',
                '×”×™×™×ª×™ ×‘×˜×—': '×”×™×™×ª×™ ×‘×˜×—',
                '×”×™×™×ª×™ ×›× ×¨××”': '×”×™×™×ª×™ ×›× ×¨××”',
                '×”×™×™×ª×™ ×××•×¨': '×”×™×™×ª×™ ×××•×¨',
                '×”×™×™×ª×™ ×¦×¨×™×š': '×”×™×™×ª×™ ×¦×¨×™×š',
                '×”×™×™×ª×™ ×—×™×™×‘': '×”×™×™×ª×™ ×—×™×™×‘',
                '×”×™×™×ª×™ ×¨×©××™': '×”×™×™×ª×™ ×¨×©××™',
                '×”×™×™×ª×™ ××•×ª×¨': '×”×™×™×ª×™ ××•×ª×¨',
                '×”×™×™×ª×™ ××¡×•×¨': '×”×™×™×ª×™ ××¡×•×¨',
                '×‘×¢×™×™×”': '×‘×¢×™×”',
                '×”×‘×¢×™×™×”': '×”×‘×¢×™×”',
                '×‘×¢×™×•×ª': '×‘×¢×™×•×ª',
                '×”×‘×¢×™×•×ª': '×”×‘×¢×™×•×ª',
                '×‘×¢×™×™×ª×™': '×‘×¢×™×™×ª×™',
                '×‘×¢×™×™×ª×™×ª': '×‘×¢×™×™×ª×™×ª',
                '×‘×¢×™×™×ª×™×™×': '×‘×¢×™×™×ª×™×™×',
                '×‘×¢×™×™×ª×™×•×ª': '×‘×¢×™×™×ª×™×•×ª',
                '××™×¤×•×': '××¤×•×',
                '×××¨×ª×™': '×××¨×ª×™',
                '×¢×©×™×ª×™': '×¢×©×™×ª×™',
                '×›×ª×‘×ª×™': '×›×ª×‘×ª×™',
                '×§×¨××ª×™': '×§×¨××ª×™',
                '×©××¢×ª×™': '×©××¢×ª×™',
                '×¨××™×ª×™': '×¨××™×ª×™',
                '×”×œ×›×ª×™': '×”×œ×›×ª×™',
                '×‘××ª×™': '×‘××ª×™',
                '×™×¦××ª×™': '×™×¦××ª×™',
                '× ×›× ×¡×ª×™': '× ×›× ×¡×ª×™',
                '×™×©×‘×ª×™': '×™×©×‘×ª×™',
                '×¢××“×ª×™': '×¢××“×ª×™',
                '×¨×¦×ª×™': '×¨×¦×ª×™',
                '×©×™×—×§×ª×™': '×©×™×—×§×ª×™',
                '×œ××“×ª×™': '×œ××“×ª×™',
                '×¢×‘×“×ª×™': '×¢×‘×“×ª×™',
                '××”×‘×ª×™': '××”×‘×ª×™',
                '×©× ××ª×™': '×©× ××ª×™',
                '×¤×—×“×ª×™': '×¤×—×“×ª×™',
                '×©××—×ª×™': '×©××—×ª×™',
                '×‘×›×™×ª×™': '×‘×›×™×ª×™',
                '×¦×—×§×ª×™': '×¦×—×§×ª×™',
                '×—×©×‘×ª×™': '×—×©×‘×ª×™',
                '×–×›×¨×ª×™': '×–×›×¨×ª×™',
                '×©×›×—×ª×™': '×©×›×—×ª×™',
                '×”×¨×’×©×ª×™': '×”×¨×’×©×ª×™',
                '×”×ª×—×œ×ª×™': '×”×ª×—×œ×ª×™',
                '×¡×™×™××ª×™': '×¡×™×™××ª×™',
                '×”××©×›×ª×™': '×”××©×›×ª×™',
                '×¢×¦×¨×ª×™': '×¢×¦×¨×ª×™',
                '×—×–×¨×ª×™': '×—×–×¨×ª×™',
                '×”×’×¢×ª×™': '×”×’×¢×ª×™',
                '×¢×–×‘×ª×™': '×¢×–×‘×ª×™',
                '× ×©××¨×ª×™': '× ×©××¨×ª×™',
                '×—×™×›×™×ª×™': '×—×™×›×™×ª×™',
                '×§×™×•×•×™×ª×™': '×§×™×•×•×™×ª×™',
                '×¨×¦×™×ª×™': '×¨×¦×™×ª×™',
                '×™×›×•×œ×ª×™': '×™×›×•×œ×ª×™',
                '×™×© ×œ×™': '×™×© ×œ×™',
                '××™×Ÿ ×œ×™': '××™×Ÿ ×œ×™',
                '×”×™×” ×œ×™': '×”×™×” ×œ×™',
                '×œ× ×”×™×” ×œ×™': '×œ× ×”×™×” ×œ×™',
                '×™×”×™×” ×œ×™': '×™×”×™×” ×œ×™',
                '×œ× ×™×”×™×” ×œ×™': '×œ× ×™×”×™×” ×œ×™',
                '×”×™×™×ª×™': '×”×™×™×ª×™',
                '×œ× ×”×™×™×ª×™': '×œ× ×”×™×™×ª×™',
                '××”×™×”': '××”×™×”',
                '×œ× ××”×™×”': '×œ× ××”×™×”',
                '×©×× ×™': '×©×× ×™',
                '×©××ª×”': '×©××ª×”',
                '×©××ª': '×©××ª',
                '×©×”×•×': '×©×”×•×',
                '×©×”×™×': '×©×”×™×',
                '×©×× ×—× ×•': '×©×× ×—× ×•',
                '×©××ª×': '×©××ª×',
                '×©××ª×Ÿ': '×©××ª×Ÿ',
                '×©×”×': '×©×”×',
                '×©×”×Ÿ': '×©×”×Ÿ',
                '×¢× ×›×œ ×–××ª': '×¢× ×›×œ ×–××ª',
                '×œ××¨×•×ª ×–××ª': '×œ××¨×•×ª ×–××ª',
                '×‘×›×œ ×–××ª': '×‘×›×œ ×–××ª',
                '××›×œ ××§×•×': '××›×œ ××§×•×',
                '×‘×›×œ ××§×¨×”': '×‘×›×œ ××§×¨×”',
                '×‘×›×œ ××¦×‘': '×‘×›×œ ××¦×‘',
                '×‘×›×œ ××—×™×¨': '×‘×›×œ ××—×™×¨',
                '×‘×›×œ ×“×¨×š': '×‘×›×œ ×“×¨×š',
                '×‘×›×œ ××•×¤×Ÿ': '×‘×›×œ ××•×¤×Ÿ',
                '×‘×›×œ ×¤× ×™×': '×‘×›×œ ×¤× ×™×',
                '×‘×›×œ ××•×‘×Ÿ': '×‘×›×œ ××•×‘×Ÿ',
                '×‘×›×œ ×”×›×‘×•×“': '×‘×›×œ ×”×›×‘×•×“',
                '×‘×›×œ ×”××”×‘×”': '×‘×›×œ ×”××”×‘×”',
                '×‘×›×œ ×”×œ×‘': '×‘×›×œ ×”×œ×‘',
                '×‘×›×œ ×”× ×©××”': '×‘×›×œ ×”× ×©××”',
                '×‘×›×œ ×”×›×•×—': '×‘×›×œ ×”×›×•×—',
                '×‘×›×œ ×”×¨×¦×•×Ÿ': '×‘×›×œ ×”×¨×¦×•×Ÿ',
                '×‘×›×œ ×”×—×©×§': '×‘×›×œ ×”×—×©×§',
                '×‘×›×œ ×”×ª×©×•×§×”': '×‘×›×œ ×”×ª×©×•×§×”',
                '×‘×›×œ ×”× ×—×™×©×•×ª': '×‘×›×œ ×”× ×—×™×©×•×ª',
                '×‘×›×œ ×”×”×ª×œ×”×‘×•×ª': '×‘×›×œ ×”×”×ª×œ×”×‘×•×ª',
                '×‘×›×œ ×”×”×ª×¨×’×©×•×ª': '×‘×›×œ ×”×”×ª×¨×’×©×•×ª',
                '×‘×›×œ ×”×©××—×”': '×‘×›×œ ×”×©××—×”',
                '×‘×›×œ ×”×¦×¢×¨': '×‘×›×œ ×”×¦×¢×¨',
                '×‘×›×œ ×”×›××‘': '×‘×›×œ ×”×›××‘',
                '×‘×›×œ ×”×™×’×•×Ÿ': '×‘×›×œ ×”×™×’×•×Ÿ',
                '×‘×›×œ ×”××›×–×‘×”': '×‘×›×œ ×”××›×–×‘×”',
                '×‘×›×œ ×”×ª×§×•×•×”': '×‘×›×œ ×”×ª×§×•×•×”',
                '×‘×›×œ ×”×××•× ×”': '×‘×›×œ ×”×××•× ×”',
                '×‘×›×œ ×”×‘×™×˜×—×•×Ÿ': '×‘×›×œ ×”×‘×™×˜×—×•×Ÿ',
                '×‘×›×œ ×”×¡×¤×§': '×‘×›×œ ×”×¡×¤×§',
                '×‘×›×œ ×”×¤×—×“': '×‘×›×œ ×”×¤×—×“',
                '×‘×›×œ ×”×—×¨×“×”': '×‘×›×œ ×”×—×¨×“×”',
                '×‘×›×œ ×”×“××’×”': '×‘×›×œ ×”×“××’×”',
                '×‘×›×œ ×”×“××’×”': '×‘×›×œ ×”×“××’×”',
                '×‘×›×œ ×”×–×”×™×¨×•×ª': '×‘×›×œ ×”×–×”×™×¨×•×ª',
                '×‘×›×œ ×”×–×¨×™×–×•×ª': '×‘×›×œ ×”×–×¨×™×–×•×ª',
                '×‘×›×œ ×”××”×™×¨×•×ª': '×‘×›×œ ×”××”×™×¨×•×ª',
                '×‘×›×œ ×”××™×˜×™×•×ª': '×‘×›×œ ×”××™×˜×™×•×ª',
                '×‘×›×œ ×”×¡×‘×œ× ×•×ª': '×‘×›×œ ×”×¡×‘×œ× ×•×ª',
                '×‘×›×œ ×—×•×¡×¨ ×”×¡×‘×œ× ×•×ª': '×‘×›×œ ×—×•×¡×¨ ×”×¡×‘×œ× ×•×ª',
                '×‘×›×œ ×”×¨×•×’×¢': '×‘×›×œ ×”×¨×•×’×¢',
                '×‘×›×œ ×”×œ×—×¥': '×‘×›×œ ×”×œ×—×¥',
                '×‘×›×œ ×”××ª×—': '×‘×›×œ ×”××ª×—',
                '×‘×›×œ ×”×¨×’×™×¢×•×ª': '×‘×›×œ ×”×¨×’×™×¢×•×ª',
                '×‘×›×œ ×”×¨×¢×©': '×‘×›×œ ×”×¨×¢×©',
                '×‘×›×œ ×”×©×§×˜': '×‘×›×œ ×”×©×§×˜',
                '×‘×›×œ ×”×“×××”': '×‘×›×œ ×”×“×××”',
                '×‘×›×œ ×”×‘×œ×’×Ÿ': '×‘×›×œ ×”×‘×œ×’×Ÿ',
                '×‘×›×œ ×”×¡×“×¨': '×‘×›×œ ×”×¡×“×¨',
                '×‘×›×œ ×”××¨×’×•×Ÿ': '×‘×›×œ ×”××¨×’×•×Ÿ',
                '×‘×›×œ ×”×›××•×¡': '×‘×›×œ ×”×›××•×¡',
                '×‘×›×œ ×”×‘×”×™×¨×•×ª': '×‘×›×œ ×”×‘×”×™×¨×•×ª',
                '×‘×›×œ ×”×‘×œ×‘×•×œ': '×‘×›×œ ×”×‘×œ×‘×•×œ',
                '×‘×›×œ ×”×‘×”×™×¨×•×ª': '×‘×›×œ ×”×‘×”×™×¨×•×ª',
                '×‘×›×œ ×”×¢×¨×¤×•×œ': '×‘×›×œ ×”×¢×¨×¤×•×œ',
                '×‘×›×œ ×”×•×“××•×ª': '×‘×›×œ ×”×•×“××•×ª',
                '×‘×›×œ ×—×•×¡×¨ ×”×•×•×“××•×ª': '×‘×›×œ ×—×•×¡×¨ ×”×•×•×“××•×ª',
                '×‘×›×œ ×”×‘×˜×—×•×Ÿ': '×‘×›×œ ×”×‘×˜×—×•×Ÿ',
                '×‘×›×œ ×—×•×¡×¨ ×”×‘×˜×—×•×Ÿ': '×‘×›×œ ×—×•×¡×¨ ×”×‘×˜×—×•×Ÿ',
                '×‘×›×œ ×”×‘×™×˜×—×•×Ÿ': '×‘×›×œ ×”×‘×™×˜×—×•×Ÿ',
                '×‘×›×œ ×—×•×¡×¨ ×”×‘×™×˜×—×•×Ÿ': '×‘×›×œ ×—×•×¡×¨ ×”×‘×™×˜×—×•×Ÿ',
                '×‘×›×œ ×”×™×©×™×¨×•×ª': '×‘×›×œ ×”×™×©×™×¨×•×ª',
                '×‘×›×œ ×”×¢×§×™×¤×•×ª': '×‘×›×œ ×”×¢×§×™×¤×•×ª',
                '×‘×›×œ ×”×¤×ª×™×—×•×ª': '×‘×›×œ ×”×¤×ª×™×—×•×ª',
                '×‘×›×œ ×”×¡×’×™×¨×•×ª': '×‘×›×œ ×”×¡×’×™×¨×•×ª',
                '×‘×›×œ ×”×›× ×•×ª': '×‘×›×œ ×”×›× ×•×ª',
                '×‘×›×œ ×”×©×§×¨': '×‘×›×œ ×”×©×§×¨',
                '×‘×›×œ ×”×××ª': '×‘×›×œ ×”×××ª',
                '×‘×›×œ ×”×©×§×¨': '×‘×›×œ ×”×©×§×¨',
                '×‘×›×œ ×”×™×©×¨×•×ª': '×‘×›×œ ×”×™×©×¨×•×ª',
                '×‘×›×œ ×”×¢×§××•××™×•×ª': '×‘×›×œ ×”×¢×§××•××™×•×ª',
                '×‘×›×œ ×”×˜×•×‘': '×‘×›×œ ×”×˜×•×‘',
                '×‘×›×œ ×”×¨×¢': '×‘×›×œ ×”×¨×¢',
                '×‘×›×œ ×”×™×•×©×¨': '×‘×›×œ ×”×™×•×©×¨',
                '×‘×›×œ ×”×–×“×•×Ÿ': '×‘×›×œ ×”×–×“×•×Ÿ',
                '×‘×›×œ ×”×˜×•×‘': '×‘×›×œ ×”×˜×•×‘',
                '×‘×›×œ ×”×¨×¢': '×‘×›×œ ×”×¨×¢',
                '×‘×›×œ ×”×™×¤×”': '×‘×›×œ ×”×™×¤×”',
                '×‘×›×œ ×”××›×•×¢×¨': '×‘×›×œ ×”××›×•×¢×¨',
                '×‘×›×œ ×”× ×—××“': '×‘×›×œ ×”× ×—××“',
                '×‘×›×œ ×”×œ× × ×—××“': '×‘×›×œ ×”×œ× × ×—××“',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×',
                '×‘×›×œ ×”× ×¢×™×': '×‘×›×œ ×”× ×¢×™×',
                '×‘×›×œ ×”×œ× × ×¢×™×': '×‘×›×œ ×”×œ× × ×¢×™×'
            };

            // ×‘×“×™×§×ª ×©×’×™××•×ª × ×¤×•×¦×•×ª
            Object.keys(commonErrors).forEach(wrongWord => {
                const regex = new RegExp('\\b' + wrongWord + '\\b', 'gi');
                const matches = text.match(regex);
                if (matches) {
                    matches.forEach(() => {
                        errors.push({
                            word: wrongWord,
                            suggestion: commonErrors[wrongWord],
                            type: '×©×’×™××ª ×›×ª×™×‘',
                            message: '×©×’×™××ª ×›×ª×™×‘ × ×¤×•×¦×” ×‘×¢×‘×¨×™×ª'
                        });
                    });
                }
            });

            // ×‘×“×™×§×ª ×—×–×¨×•×ª ××™×•×ª×¨×•×ª
            const words = text.split(/\s+/);
            for (let i = 0; i < words.length - 1; i++) {
                const cleanWord1 = words[i].replace(/[^\u0590-\u05FF\u0041-\u005A\u0061-\u007A]/g, '');
                const cleanWord2 = words[i + 1].replace(/[^\u0590-\u05FF\u0041-\u005A\u0061-\u007A]/g, '');
                
                if (cleanWord1.toLowerCase() === cleanWord2.toLowerCase() && cleanWord1.length > 2) {
                    errors.push({
                        word: '×—×–×¨×” ×¢×œ ×”××™×œ×” "' + cleanWord1 + '"',
                        suggestion: '×”×¡×¨ ××ª ×”×—×–×¨×” ×”××™×•×ª×¨×ª',
                        type: '×—×–×¨×” ××™×•×ª×¨×ª',
                        message: '××™×œ×” ×—×•×–×¨×ª ×¤×¢××™×™× ×‘×¨×¦×£'
                    });
                }
            }

            // ×‘×“×™×§×ª ×¡×™×× ×™ ×¤×™×¡×•×§ ×—×¡×¨×™×
            const sentences = text.split(/[.!?]/).filter(s => s.trim().length > 15);
            sentences.forEach(sentence => {
                if (sentence.trim() && !sentence.trim().match(/[.!?]$/)) {
                    errors.push({
                        word: '×—×¡×¨ ×¡×™××Ÿ ×¤×™×¡×•×§ ×‘×¡×•×£ ×”××©×¤×˜',
                        suggestion: '×”×•×¡×£ × ×§×•×“×”, ×¡×™××Ÿ ×©××œ×” ××• ×¡×™××Ÿ ×§×¨×™××”',
                        type: '×¡×™×× ×™ ×¤×™×¡×•×§',
                        message: '×›×œ ××©×¤×˜ ×¦×¨×™×š ×œ×”×¡×ª×™×™× ×‘×¡×™××Ÿ ×¤×™×¡×•×§ ××ª××™×'
                    });
                }
            });

            // ×‘×“×™×§×ª ×¨×•×•×—×™× ×›×¤×•×œ×™×
            if (text.includes('  ')) {
                errors.push({
                    word: '×¨×•×•×—×™× ×›×¤×•×œ×™×',
                    suggestion: '×”×©×ª××© ×‘×¨×•×•×— ×™×—×™×“ ×‘×™×Ÿ ××™×œ×™×',
                    type: '×¢×™×¦×•×‘ ×˜×§×¡×˜',
                    message: '×™×© ×™×•×ª×¨ ××¨×•×•×— ××—×“ ×‘×™×Ÿ ××™×œ×™×'
                });
            }

            // ×‘×“×™×§×ª ×”×ª×—×œ×” ×‘××™×œ×” ×§×˜× ×” (×œ××—×¨ × ×§×•×“×”)
            const afterPeriod = text.match(/\.\s+[×-×ª]/g);
            if (afterPeriod) {
                errors.push({
                    word: '×”×ª×—×œ×ª ××©×¤×˜ ×‘××•×ª ×§×˜× ×”',
                    suggestion: '×”×ª×—×œ ××©×¤×˜ ×—×“×© ×‘××•×ª ×’×“×•×œ×”',
                    type: '×›×ª×™×‘ × ×›×•×Ÿ',
                    message: '××©×¤×˜ ×—×“×© ×¦×¨×™×š ×œ×”×ª×—×™×œ ×‘××•×ª ×’×“×•×œ×”'
                });
            }

            // ×‘×“×™×§×ª ××™×œ×•×ª ×§×™×©×•×¨ ×—×¡×¨×•×ª
            const longSentences = text.split(/[.!?]/).filter(s => s.split(' ').length > 15);
            longSentences.forEach(sentence => {
                if (!sentence.match(/(×•××•×œ×|××•×œ×|××‘×œ|××š|×‘×¨×|×œ××¨×•×ª|×¢× ×–××ª|×‘× ×•×¡×£|×™×ª×¨×” ××›×š|××¦×“ ××—×“|××¦×“ ×©× ×™|×¨××©×™×ª|×©× ×™×ª|×œ×‘×¡×•×£|×œ×¡×™×›×•×)/)) {
                    errors.push({
                        word: '××©×¤×˜ ××¨×•×š ×œ×œ× ××™×œ×•×ª ×§×™×©×•×¨',
                        suggestion: '×”×•×¡×£ ××™×œ×•×ª ×§×™×©×•×¨ ×›××• "××•×œ×", "×‘× ×•×¡×£", "×™×ª×¨×” ××›×š"',
                        type: '××‘× ×” ××©×¤×˜',
                        message: '××©×¤×˜×™× ××¨×•×›×™× ×–×§×•×§×™× ×œ××™×œ×•×ª ×§×™×©×•×¨ ×œ×‘×”×™×¨×•×ª'
                    });
                }
            });

            // ×‘×“×™×§×ª ×©×™××•×© ×™×ª×¨ ×‘××™×œ×” "×›×™"
            const kiCount = (text.match(/\b×›×™\b/g) || []).length;
            const wordCount = text.split(/\s+/).length;
            if (kiCount > wordCount / 20) {
                errors.push({
                    word: '×©×™××•×© ×™×ª×¨ ×‘××™×œ×” "×›×™"',
                    suggestion: '×”×©×ª××© ×‘××™×œ×™× ×—×œ×•×¤×™×•×ª: "××›×™×•×•×Ÿ ×©", "×‘×’×œ×œ ×©", "×”×™×•×ª ×©"',
                    type: '×¢×•×©×¨ ×œ×©×•× ×™',
                    message: '×©×™××•×© ×™×ª×¨ ×‘××™×œ×” ××—×ª ×¤×•×’×¢ ×‘×¢×•×©×¨ ×”×œ×©×•× ×™'
                });
            }

            // ×‘×“×™×§×ª ××™×œ×•×ª ××™×œ×•×™ ××™×•×ª×¨×•×ª
            const fillerWords = ['××', '××”', '××××', '×›××™×œ×•', '×‘×¢×¦×', '××•×§×™×™', '×˜×•×‘', '××– ××'];
            fillerWords.forEach(filler => {
                if (text.includes(filler)) {
                    errors.push({
                        word: `××™×œ×ª ××™×œ×•×™: "${filler}"`,
                        suggestion: '×”×¡×¨ ××™×œ×•×ª ××™×œ×•×™ ××™×•×ª×¨×•×ª',
                        type: '× ×™×§×•×™ ×˜×§×¡×˜',
                        message: '××™×œ×•×ª ××™×œ×•×™ ×¤×•×’×¢×•×ª ×‘×¨××ª ×”×›×ª×™×‘×”'
                    });
                }
            });

            return errors;
        }

        // ×¤×•× ×§×¦×™×” ×œ×ª×™×§×•×Ÿ ××•×˜×•××˜×™ ×©×œ ×©×’×™××•×ª
        function copyCorrection(fieldName, wrongWord, correctWord) {
            // ××¦× ××ª ×”×©×“×” ×œ×¤×™ ×©× ×”×ª×•×•×™×ª
            const labels = document.querySelectorAll('label');
            let targetInput = null;
            
            labels.forEach(label => {
                if (label.textContent.includes(fieldName)) {
                    targetInput = label.nextElementSibling;
                }
            });
            
            if (targetInput) {
                // ×”×—×œ×£ ××ª ×”××™×œ×” ×”×©×’×•×™×” ×‘××™×œ×” ×”× ×›×•× ×”
                const currentText = targetInput.value;
                const correctedText = currentText.replace(new RegExp('\\b' + wrongWord + '\\b', 'gi'), correctWord);
                targetInput.value = correctedText;
                
                // ×¡××Ÿ ××ª ×”×©×“×” ×›×ª×•×§×Ÿ
                targetInput.style.borderColor = '#ffc107';
                targetInput.style.backgroundColor = '#fff8e1';
                
                // ×”×¦×’ ×”×•×“×¢×”
                showMessage(`âœ… ×©×’×™××ª ×›×ª×™×‘ ×ª×•×§× ×”! ×”××™×œ×” "${wrongWord}" ×”×•×—×œ×¤×” ×œ-"${correctWord}" ×‘×©×“×” "${fieldName}"`, 'success');
                
                // ×”×ª××§×“ ×‘×©×“×” ×©×ª×•×§×Ÿ
                targetInput.focus();
                
                // ××—×¨×™ 3 ×©× ×™×•×ª, ×”×¡×¨ ××ª ×”×¡×™××•×Ÿ ×”××™×•×—×“
                setTimeout(() => {
                    targetInput.style.borderColor = '#28a745';
                    targetInput.style.backgroundColor = '#f0fff4';
                }, 3000);
            }
        }

        // ×¤×•× ×§×¦×™×” ×œ×ª×™×§×•×Ÿ ×›×œ ×”×©×’×™××•×ª ××•×˜×•××˜×™×ª
        function fixAllErrors() {
            const errorDetails = document.getElementById('errorDetails');
            if (!errorDetails) {
                showMessage('âŒ ×œ× × ××¦××• ×©×’×™××•×ª ×œ×ª×™×§×•×Ÿ', 'error');
                return;
            }

            let fixedCount = 0;
            const buttons = errorDetails.querySelectorAll('button[onclick*="copyCorrection"]');
            
            buttons.forEach((button, index) => {
                setTimeout(() => {
                    button.click();
                    fixedCount++;
                    
                    if (fixedCount === buttons.length) {
                        setTimeout(() => {
                            showMessage(`ğŸ‰ ×›×œ ×©×’×™××•×ª ×”×›×ª×™×‘ ×ª×•×§× ×• ××•×˜×•××˜×™×ª! (${fixedCount} ×©×’×™××•×ª ×›×ª×™×‘ ×ª×•×§× ×•)`, 'success');
                            // ×”×¡×¨ ××ª ×¨×©×™××ª ×”×©×’×™××•×ª ××—×¨×™ ×”×ª×™×§×•×Ÿ
                            setTimeout(() => {
                                if (errorDetails.parentNode) {
                                    errorDetails.remove();
                                }
                            }, 2000);
                        }, 500);
                    }
                }, index * 300); // ×”×©×”×™×” ×§×˜× ×” ×‘×™×Ÿ ×”×ª×™×§×•× ×™×
            });
        }

        function showMessage(message, type) {
            const existingMessages = document.querySelectorAll('.message');
            existingMessages.forEach(msg => msg.remove());

            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            if (type === 'success') {
                messageDiv.style.cssText = 'background: #d4edda; border: 2px solid #28a745; color: #155724; padding: 15px; border-radius: 10px; margin: 15px 0; font-weight: bold; text-align: center;';
                messageDiv.innerHTML = 'âœ… ' + message;
            } else if (type === 'error') {
                messageDiv.style.cssText = 'background: #f8d7da; border: 2px solid #dc3545; color: #721c24; padding: 15px; border-radius: 10px; margin: 15px 0; font-weight: bold; text-align: center;';
                messageDiv.innerHTML = 'âš ï¸ ' + message;
            } else if (type === 'info') {
                messageDiv.style.cssText = 'background: #d1ecf1; border: 2px solid #17a2b8; color: #0c5460; padding: 15px; border-radius: 10px; margin: 15px 0; font-weight: bold; text-align: center;';
                messageDiv.innerHTML = 'ğŸ’¡ ' + message;
            }

            const activeCard = document.querySelector('.step-content.active .card');
            if (activeCard) {
                activeCard.insertBefore(messageDiv, activeCard.firstChild);
            }

            if (type !== 'error') {
                setTimeout(() => {
                    if (messageDiv.parentNode) {
                        messageDiv.remove();
                    }
                }, 5000);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('.btn-primary, .back-btn');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });

            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    this.style.transform = 'scale(1.02)';
                    this.style.transition = 'all 0.3s ease';
                });

                input.addEventListener('blur', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });
    </script>
</body>
</html>
